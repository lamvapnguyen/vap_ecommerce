function onresizeFunc(n,t){t.css({"margin-top":0,top:n.offset().top,left:n.offset().left});jQuery("#colors_ctrls").css({top:n.offset().top+n.height-50,left:n.offset().left})}function preload(n){if(typeof document.body!="undefined")try{var i=document.createElement("div"),t=i.style;t.position="absolute";t.top=t.left=0;t.visibility="hidden";document.body.appendChild(i);i.innerHTML='<img class="preload_img" src="'+n+'" />'}catch(r){}}(function(n){n.fn.j360=function(n){var n=jQuery.extend({clicked:!1,currImg:1},n);return this.each(function(){var t=jQuery(this),r={},i,u,f,e;t.css({"margin-left":"auto","margin-right":"auto","text-align":"center",overflow:"hidden"});$overlay=t.clone(!0);$overlay.html('<img src="images/loading.gif" class="loader" style="margin-top:'+(t.height()/2-15)+'px" />');$overlay.attr("id","view_overlay");$overlay.css({position:"absolute","z-index":"5",top:t.offset().top,left:t.offset().left,background:"#fff"});t.after($overlay);t.after('<div id="colors_ctrls"><\/div>');jQuery("#colors_ctrls").css({width:t.width(),position:"absolute","z-index":"5",top:t.offset().top+t.height-50,left:t.offset().left});i=0;jQuery("img",t).each(function(){r[++i]=jQuery(this).attr("src");preload(jQuery(this).attr("src"))});u=0;jQuery(".preload_img").load(function(){++u==i&&($overlay.animate({filter:"alpha(Opacity=0)",opacity:0},500),t.html('<img src="'+r[1]+'" />'),$overlay.bind("mousedown touchstart",function(t){return n.currPos=t.type=="touchstart"?window.event.touches[0].pageX:t.pageX,n.clicked=!0,!1}),jQuery(document).bind("mouseup touchend",function(){n.clicked=!1}),jQuery(document).bind("mousemove touchmove",function(u){var f,e;n.clicked&&(f=u.type=="touchmove"?window.event.targetTouches[0].pageX:u.pageX,e=4,Math.abs(n.currPos-f)>=e&&(n.currPos-f>=e?(n.currImg++,n.currImg>i&&(n.currImg=1)):(n.currImg--,n.currImg<1&&(n.currImg=i)),n.currPos=f,t.html('<img src="'+r[n.currImg]+'" />')))}))});__browser.msie||jQuery.browser.mozilla||jQuery.browser.opera||jQuery.browser.safari?jQuery(window).resize(function(){onresizeFunc(t,$overlay)}):(f="onorientationchange"in window,e=f?"orientationchange":"resize",window.addEventListener(e,function(){onresizeFunc(t,$overlay)},!1));onresizeFunc(t,$overlay)})}})(jQuery);