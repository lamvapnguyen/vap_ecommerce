function _booking1001_checkoverlap(n,t,i){for(var r=0;r<n.length;r++)if(t>n[r].start&&t<n[r].end||i>n[r].start&&i<n[r].end||t>=n[r].start&&i<=n[r].end||t<=n[r].start&&i>=n[r].end)return!0;return!1}function _init_booking1001_cal(n,t,i,r,u,f,e,o){$("#"+n).html("");var h=new Date,l=h.getDate(),a=h.getMonth(),v=h.getFullYear(),c=e==1?"vi":"en",s=$("#"+n).fullCalendar({lang:c,header:{left:"title",center:"",right:"prev,next today"},views:{agenda3Day:{type:"agenda",duration:{days:3},buttonText:"3 day"}},height:520,minTime:u,maxTime:f,allDaySlot:!1,selectable:!0,selectHelper:!0,editable:!0,disableResizing:!0,allDayDefault:!1,defaultView:"agendaWeek",eventBackgroundColor:"rgba(178,19,226,.5)",eventBorderColor:"#b213e2",eventTextColor:"#000",firstDay:1,slotDuration:"00:15:00",slotLabelFormat:"hh:mm A",slotLabelInterval:15,events:function(t,i,r,u){_po_cal_current_startdate=t;$.post(__gvars.ajurl,{action:"getcal_event",s:t.year()+"-"+t.month()+"-"+t.date()+"-"+t.hours()+"-"+t.minutes(),e:i.year()+"-"+i.month()+"-"+i.date()+"-"+i.hours()+"-"+i.minutes()},function(t){if(t!=""){var i=[];$("<r>"+t+"<\/r>").find("i").each(function(){var n=$(this),u=n.attr("start"),r=u.split(","),t;u=n.attr("end");t=u.split(",");i.push({title:"",start:new Date(r[0],r[1],r[2],r[3],r[4],0),end:new Date(t[0],t[1],t[2],t[3],t[4],0),backgroundColor:n.attr("backgroundColor"),borderColor:n.attr("borderColor"),color:n.attr("color"),className:n.attr("status")=="1"?"e_completed":"",editable:!1,durationEditable:!1})});u(i);$("#"+n+" a").each(function(){var n=$(this);n.hasClass("e_completed")})}})},select:function(n,u){var c=n.year(),l=n.month()+1,a=n.date(),v=n.hours(),y=n.minutes(),p=u.year(),w=u.month()+1,b=u.date(),k=u.hours(),d=u.minutes(),tt=c+"|"+l+"|"+a+"|"+v+"|"+y+"|"+p+"|"+w+"|"+b+"|"+k+"|"+d,e=new Date(c,l-1,a,v,y,0),h=new Date(p,w-1,b,k,d,0),g,nt,f;if(time=e.toLocaleDateString("en-US",{hour:"2-digit",minute:"2-digit"}),_booking1001.start=e,_booking1001.end=h,o&&(g=s.fullCalendar("clientEvents"),nt=_booking1001_checkoverlap(g,e,h),nt))return alert("Please choose another time."),!1;f=(h-e)/6e4;switch(f){case 75:f=90;break;case 135:f=150;break;case 195:f=210;break;case 255:f=270}return f>300&&(f=300),$("#contact_duration").val(f),$("#d_contact_start").text(time),$("#"+r).val(tt),$("#"+t).hide(),$("#"+i).show(),!1}});o&&$("#contact_duration").change(function(){var n=$(this).val(),u=s.fullCalendar("clientEvents"),t=_booking1001.start,i=_booking1001.end,f,r;if(i=new Date(t.getTime()+n*6e4),f=_booking1001_checkoverlap(u,t,i),r=!0,f){while(r)n>15&&(n=n-15,i=new Date(t.getTime()+n*6e4),r=_booking1001_checkoverlap(u,t,i));$(this).val(n)}});$(window).width()<801&&(s.fullCalendar("changeView","agenda3Day"),s.fullCalendar("option","height","auto"))}var _booking1001={start:new Date,end:new Date};