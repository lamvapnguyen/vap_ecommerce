var __avplayer={_file_ext:["*.wma;*.wmv;*.mpeg;*.mpeg4;*.mpg;*.wav;*.avi;*.asx;*.asf;*.dat","*.rm;*.rmvb;*.divx;*.smil","*.qt;*.mqv","*.swf","*.flv;*.mp3;*.mov;*.h264;*.aac","*.webm;*.ogg;*.ogv;*.m4v","","*.mp4"],_rootPath:"/scripts/av/",_silverlightPath:"/scripts/lib/silverlight.js",_logo:"/images/upload/site/media_logo.png",_flvPlayerSrc:"images/flv_player.swf",_flvPlayerLicensedSrc:"images/flv_player_licensed.swf",_silverlightPlayerSrc:"images/silverlight_player.xaml",play:function(n,t){var o,p,l,u,a,f,h,v,c;t=$.extend({url:"",images:"",autoPlay:!1,loop:!1,allowFullScreen:!0,width:"320",height:"220",offSilverlight:!1,hasLicensed:!0,offScreen:!1,v_type:"",dvr:!1},t);var r="wmp",e="",i=$.trim(t.url);if(i.indexOf("http://www.youtube.com/")==0||i.indexOf("http://youtube.com/")==0)i.indexOf("watch?v")!=-1&&(i=i.replace("watch?v=","v/")),r="youtube";else if(i.indexOf("rtmp://")==0)t.streamer=!0,r="flvplayer";else{var s=-1,y=i.lastIndexOf(".");if(y!=-1)for(e="*"+i.substr(y),o=0;o<__avplayer._file_ext.length&&s==-1;o++)p=__avplayer._file_ext[o].split(";"),$.inArray(e,p)!=-1&&(s=o);if(s!=-1)switch(s){case 0:r="wmp";break;case 1:r="real";break;case 2:r="quicktime";break;case 3:r="flash";break;case 4:r="flvplayer";break;case 5:r="flvplaylist";break;default:r="flvplayer2014"}}r=="wmp"&&!t.offSilverlight&&__avplayer._has_silverlight()&&(r="silverlight");l=t.autoPlay;u="";$.browser.safari?(e=="*.mp4"||e=="*.mov"||/iphone/gi.test(navigator.appVersion)||/ipad/gi.test(navigator.appVersion))&&(r="html5",t.offScreen=!0):t.offScreen||(t.autoPlay=!0);a=Math.random().toString().replace(".","");switch(r){case"html5":case"flvplayer2014":u="<div id='a_"+a+"'>Loading Video...<\/div><script type='text/javascript' src='/scripts/av/jwplayer/jwplayer.js'><\/script><script type='text/javascript'> $(function (){ jwplayer('a_"+a+"').setup({ file:'"+i+"', image:'http://www.lvtm.vn/a/images/logo.png' }); });<\/script>";break;case"wmp":u='<object height="'+t.height+'" width="'+t.width+'" type="application/x-oleobject" standby="Loading Windows Media Player components..." \t\t\t\t\tclassid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6" id="MediaPlayer">\t\t\t\t\t<param value="'+i+'" name="FileName">\t\t\t\t\t<param value="'+i+'" name="URL">\t\t\t\t\t<param value="true" name="ShowControls">\t\t\t\t\t<param value="true" name="ShowStatusBar">\t\t\t\t\t<param value="true" name="ShowDisplay">\t\t\t\t\t<param value="true" name="AnimationatStart">\t\t\t\t\t<param value="false" name="TransparentAtStart">\t\t\t\t\t<param value="'+(t.loop?999:1)+'" name="playCount">\t\t\t\t\t<param value="'+t.autoPlay+'" name="autostart">\t\t\t\t\t<embed height="'+t.height+'" width="'+t.width+'" playCount="'+(t.loop?999:1)+'" autostart="'+t.autoPlay+'" showdisplay="1" showstatusbar="1" \t\t\t\t\tshowcontrols="1" src="'+i+'" AnimationatStart="1" TransparentAtStart="0" type="application/x-ms-wmp">\t\t\t\t<\/object>';break;case"flvplayer":case"flvplaylist":f={width:t.width,height:t.height,autostart:t.autoPlay,repeat:t.loop?"always":"none",backcolor:"111111",frontcolor:"cccccc",lightcolor:"66cc00",stretching:"fill",enablejs:!1,mute:!1,bufferlength:5,file:i,image:t.images,skin:__avplayer._rootPath+"images/skins/default.swf","logo.file":__avplayer._logo,"logo.link":"/","logo.position":"top-right","logo.hide":!1};r=="flvplaylist"&&(f.file=null,f.playlistfile=i,delete f.file);t.streamer&&(f.provider="rtmp",f.file=null,delete f.file);e=="*.mp3"&&(f.plugins=__avplayer._rootPath+"images/plugins/revolt.swf");h=$.param(f);t.streamer&&(h+="&streamer="+i);v=__avplayer._rootPath+(t.hasLicensed?__avplayer._flvPlayerLicensedSrc:__avplayer._flvPlayerSrc);u='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" type="application/x-shockwave-flash" width="'+t.width+'" height="'+t.height+'">\t\t\t\t\t<param name="movie" value="'+v+'">\t\t\t\t\t<param name="allowfullscreen" value="'+t.allowFullScreen+'">\t\t\t\t\t<param name="allowscriptaccess" value="always">\t\t\t\t\t<param name="wmode" value="transparent">\t\t\t\t\t<param name="flashvars" value="'+h+'">\t\t\t\t\t<embed src="'+v+'" width="'+t.width+'" height="'+t.height+'" wmode="transparent" bgcolor="#ffffff" allowscriptaccess="always" allowfullscreen="'+t.allowFullScreen+'" \t\t\t\t\tflashvars="'+h+'"/><\/object>';break;case"silverlight":u="";break;case"youtube":case"flash":l=!0;u='<object width="'+t.width+'" height="'+t.height+'">\t\t\t\t\t<param name="movie" value="'+i+'"><\/param>\t\t\t\t\t<param name="allowFullScreen" value="'+t.allowFullScreen+'"><\/param>\t\t\t\t\t<param name="allowscriptaccess" value="always"><\/param>\t\t\t\t\t<param name="wmode" value="transparent"><\/param>\t\t\t\t\t<embed wmode="transparent" src="'+i+'" type="application/x-shockwave-flash" allowscriptaccess="always" \t\t\t\t\tallowfullscreen="'+t.allowFullScreen+'" width="'+t.width+'" height="'+t.height+'"><\/embed>\t\t\t\t<\/object>';break;case"real":u='<object height="'+t.height+'" width="'+t.width+'" classid="clsid:CFCDAA03-8BE4-11cf-B84B-0020AFBBCCFA">\t\t\t\t\t<param value="'+i+'" name="SRC">\t\t\t\t\t<param value="all" name="CONTROLS">\t\t\t\t\t<param value="_master" name="CONSOLE">\t\t\t\t\t<param value="'+t.autoPlay+'" name="AUTOSTART">\t\t\t\t\t<embed height="'+t.height+'" width="'+t.width+'" autostart="'+t.autoPlay+'" console="_master" controls="all" nojava="true" src="'+i+'">\t\t\t\t<\/object>';break;case"quicktime":u='<object width="'+t.width+'" height="'+t.height+'" classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab">\t\t\t\t\t<param name="src" value="'+i+'">\t\t\t\t\t<param name="autoplay" value="'+t.autoPlay+'">\t\t\t\t\t<param name="controller" value="true">\t\t\t\t\t<embed src="'+i+'" width="'+t.width+'" height="'+t.height+'" autoplay="'+t.autoPlay+'" controller="false" pluginspage="http://www.apple.com/quicktime/download/"><\/embed>\t\t\t\t<\/object>'}c=function(){r=="silverlight"?__avplayer.loadScript(__avplayer._silverlightPath,function(){__avplayer.loadScript(__avplayer._rootPath+"wmvplayer.js",function(){var r=$(n).empty().html("<div><\/div>").children(":first")[0],u=__avplayer._rootPath+__avplayer._silverlightPlayerSrc,f={height:t.height,width:t.width,file:i,autostart:t.autoPlay.toString(),screencolor:"fbfbfb",repeat:t.loop.toString(),linkfromdisplay:"false"},e=new jeroenwijering.Player(r,u,f);$(n).data("silverlight",e)})}):$(n).empty().html(u)};l||t.offScreen?c():t.images&&t.images!=""?$(n).empty().html("<div class='media' style='background:#E6F0F9; position:relative; cursor:pointer; height: "+t.height+"px; overflow:auto; width: "+t.width+"px;'><img src=\""+t.images+"\" style='position:absolute;top:0;left:0;width:"+t.width+"px;height:"+t.height+"px' /><div style='position:absolute;top:0;left:0;postion:relative; cursor:pointer; height: "+t.height+"px; overflow:auto; opacity:0.6;filter:alpha(opacity=60);width: "+t.width+"px;'><\/div><\/div>").children(":first").click(c):$(n).empty().html("<div class='media' style='cursor:pointer; height: "+t.height+"px; overflow:auto; width: "+t.width+"px;'><\/div>").children(":first").click(c);t.v_type=r;$(n).data("options",t);$(n).data("isMedia",!0)},remove:function(n){var i,t;n=$(n);n.data("isMedia")==!0&&(i=n.data("options"),i.v_type=="silverlight"&&(t=n.data("silverlight"),t&&t.view&&t.sendEvent("STOP")));n.empty();n.data("isMedia",null);n.data("options",null);n.data("silverlight",null)},_scriptManager:[],loadScript:function(n,t){$(function(){__avplayer._scriptManager[n]==null?$.getScript(n,function(){__avplayer._scriptManager[n]=!0;$.isFunction(t)&&t()}):$.isFunction(t)&&t()})},_has_silverlight:function(){var n=!1,t;try{try{t=new ActiveXObject("AgControl.AgControl");n=!0}catch(i){navigator.plugins["Silverlight Plug-In"]&&(n=!0)}}catch(i){}return n}};$.fn.avplayer=function(n,t){return $(this).each(function(){switch(n){case"play":__avplayer.play(this,t);break;case"remove":__avplayer.remove(this)}}),this};