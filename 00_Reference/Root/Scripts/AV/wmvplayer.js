if(typeof jeroenwijering=="undefined"){var jeroenwijering={};jeroenwijering.utils={}}jeroenwijering.Player=function(n,t,i){this.controller;this.model;this.view;this.configuration={backgroundcolor:"FFFFFF",windowless:"false",file:"",height:"260",image:"",backcolor:"FFFFFF",frontcolor:"000000",lightcolor:"000000",screencolor:"000000",width:"320",logo:"",overstretch:"false",shownavigation:"true",showstop:"false",showdigits:"true",usefullscreen:"true",usemute:"false",autostart:"false",bufferlength:"3",duration:"0",repeat:"false",sender:"",start:"0",volume:"90",link:"",linkfromdisplay:"false",linktarget:"_self"};for(itm in this.configuration)i[itm]!=undefined&&(this.configuration[itm]=itm.indexOf("color")>0?i[itm].substr(i[itm].length-6):i[itm]);Silverlight.createObjectEx({source:t,parentElement:n,properties:{width:this.configuration.width,height:this.configuration.height,version:"1.0",inplaceInstallPrompt:!0,isWindowless:this.configuration.windowless,background:"#"+this.configuration.backgroundcolor},events:{onLoad:this.onLoadHandler,onError:null},context:this})};jeroenwijering.Player.prototype={addListener:function(n,t){this.view.listeners.push({type:n,func:t})},getConfig:function(){return this.configuration},onLoadHandler:function(n,t,i){t.configuration.sender=i;t.controller=new jeroenwijering.Controller(t.configuration);t.view=new jeroenwijering.View(t.configuration,t.controller);t.model=new jeroenwijering.Model(t.configuration,t.controller,t.view);t.controller.startMVC(t.view,t.model)},sendEvent:function(n,t){switch(n.toUpperCase()){case"LINK":this.controller.setLink();break;case"LOAD":this.controller.setLoad(t);break;case"MUTE":this.controller.setMute();break;case"PLAY":this.controller.setPlay();break;case"SCRUB":this.controller.setScrub(t);break;case"STOP":this.controller.setStop();break;case"VOLUME":this.controller.setVolume(t)}}};jeroenwijering.Controller=function(n){this.configuration=n};jeroenwijering.Controller.prototype={startMVC:function(n,t){if(this.view=n,this.model=t,this.configuration.usemute=="true"){this.view.onVolume(0);this.view.onMute(!0);this.model.goVolume(0)}else{this.view.onVolume(this.configuration.volume);this.model.goVolume(this.configuration.volume)}this.configuration.autostart=="true"?this.model.goStart():this.model.goPause()},setState:function(n,t){this.state=t;var i=this.configuration.start;n=="Closed"&&i>0&&setTimeout(jeroenwijering.utils.delegate(this,this.setScrub),200,i)},setLink:function(){if(this.configuration.linktarget.indexOf("javascript:")==0)return Function(this.configuration.linktarget).apply();this.configuration.linktarget=="_blank"?window.open(this.configuration.link):this.configuration.linktarget!=""&&(window.location=this.configuration.link)},setLoad:function(n){this.model.state!="Closed"&&this.model.goStop();this.configuration.file=n;this.configuration.autostart=="true"&&setTimeout(jeroenwijering.utils.delegate(this.model,this.model.goStart),100)},setMute:function(){if(this.configuration.usemute=="true"){this.configuration.usemute="false";this.model.goVolume(this.configuration.volume);this.view.onMute(!1)}else{this.configuration.usemute="true";this.model.goVolume(0);this.view.onMute(!0)}},setPlay:function(){this.state=="Buffering"||this.state=="Playing"?this.configuration.duration==0?this.model.goStop():this.model.goPause():this.model.goStart()},setScrub:function(n){n<2?n=0:n>this.configuration.duration-4&&(n=this.configuration.duration-4);this.state=="Buffering"||this.state=="Playing"?this.model.goStart(n):this.model.goPause(n)},setStop:function(){this.model.goStop()},setVolume:function(n){n<0?n=0:n>100&&(n=100);this.configuration.volume=Math.round(n);this.model.goVolume(n);this.view.onVolume(n);if(this.configuration.usemute=="true"){this.configuration.usemute="false";this.view.onMute(!1)}},setFullscreen:function(){var n=!this.configuration.sender.getHost().content.FullScreen;this.configuration.sender.getHost().content.FullScreen=n;jeroenwijering.utils.delegate(this.view,this.view.onFullscreen)}};jeroenwijering.View=function(n,t){this.configuration=n;this.listeners=Array();this.controller=t;this.fstimeout;this.fslistener;this.display=this.configuration.sender.findName("PlayerDisplay");this.controlbar=this.configuration.sender.findName("PlayerControls");this.configuration.sender.getHost().content.onResize=jeroenwijering.utils.delegate(this,this.resizePlayer);this.configuration.sender.getHost().content.onFullScreenChange=jeroenwijering.utils.delegate(this,this.onFullscreen);this.assignColorsClicks();this.resizePlayer()};jeroenwijering.View.prototype={onBuffer:function(n){var t=this.configuration.sender;n==0?t.findName("BufferText").Text=null:(n=n<10?"0"+n:""+n,t.findName("BufferText").Text=n);this.delegate("BUFFER",[n])},onFullscreen:function(){var n=this.configuration.sender,t=n.getHost().content.FullScreen;t?(this.fstimeout=setTimeout(jeroenwijering.utils.delegate(this,this.hideFSControls),2e3),this.fslistener=this.display.addEventListener("MouseMove",jeroenwijering.utils.delegate(this,this.showFSControls)),n.findName("FullscreenSymbol").Visibility="Collapsed",n.findName("FullscreenOffSymbol").Visibility="Visible"):(clearTimeout(this.fstimeout),this.display.removeEventListener("MouseMove",this.fslistener),this.controlbar.Visibility="Visible",this.display.Cursor="Hand",n.findName("FullscreenSymbol").Visibility="Visible",n.findName("FullscreenOffSymbol").Visibility="Collapsed");this.resizePlayer();this.delegate("FULLSCREEN")},showFSControls:function(n,t){var i=n.findName("PlayerControls"),r=t.GetPosition(i).Y;clearTimeout(this.fstimeout);this.controlbar.Visibility="Visible";this.display.Cursor="Hand";r<0&&(this.fstimeout=setTimeout(jeroenwijering.utils.delegate(this,this.hideFSControls),2e3))},hideFSControls:function(){this.controlbar.Visibility="Collapsed";this.display.Cursor="None"},onLoad:function(n){var t=this.configuration.sender,i=t.findName("TimeSlider").Width;t.findName("DownloadProgress").Width=Math.round(i*n/100);this.delegate("LOAD",[n])},onMute:function(n){var t=this.configuration.sender;this.configuration.usemute=""+n;n?(t.findName("VolumeHighlight").Visibility="Collapsed",t.findName("MuteSymbol").Visibility="Visible",t.findName("MuteOffSymbol").Visibility="Collapsed",this.state=="Playing"&&(t.findName("MuteIcon").Visibility="Visible")):(t.findName("VolumeHighlight").Visibility="Visible",t.findName("MuteSymbol").Visibility="Collapsed",t.findName("MuteOffSymbol").Visibility="Visible",t.findName("MuteIcon").Visibility="Collapsed");this.delegate("MUTE")},onState:function(n,t){var i=this.configuration.sender;this.state=t;t=="Buffering"||t=="Playing"||t=="Opening"?(i.findName("PlayIcon").Visibility="Collapsed",i.findName("PlaySymbol").Visibility="Collapsed",i.findName("PlayOffSymbol").Visibility="Visible",t=="Playing"?(i.findName("BufferIcon").Visibility="Collapsed",i.findName("BufferText").Visibility="Collapsed",this.configuration.usemute=="true"&&(i.findName("MuteIcon").Visibility="Visible")):(i.findName("BufferIcon").Visibility="Visible",i.findName("BufferText").Visibility="Visible")):(i.findName("MuteIcon").Visibility="Collapsed",i.findName("BufferIcon").Visibility="Collapsed",i.findName("BufferText").Visibility="Collapsed",i.findName("PlayOffSymbol").Visibility="Collapsed",i.findName("PlaySymbol").Visibility="Visible",i.findName("PlayIcon").Visibility=this.configuration.linkfromdisplay=="true"?"Collapsed":"Visible");try{n=="Completed"&&t=="Buffering"||n=="Buffering"&&t=="Paused"||playerStatusChange(n.toUpperCase(),t.toUpperCase())}catch(r){}this.delegate("STATE",[n,t])},onTime:function(n,t){var i=this.configuration.sender,i=this.configuration.sender,u=i.findName("TimeSlider").Width,r;t>0?(r=Math.round(u*n/t),this.configuration.duration=t,i.findName("ElapsedText").Text=jeroenwijering.utils.timestring(n),i.findName("RemainingText").Text=jeroenwijering.utils.timestring(t-n),i.findName("TimeSymbol").Visibility="Visible",i.findName("TimeSymbol")["Canvas.Left"]=r+4,i.findName("TimeHighlight").Width=r-2):i.findName("TimeSymbol").Visibility="Collapsed";this.delegate("TIME",[n,t])},onVolume:function(n){var t=this.configuration.sender;t.findName("VolumeHighlight").Width=Math.round(n/5);this.delegate("VOLUME",[n])},assignColorsClicks:function(){this.display.Cursor="Hand";this.display.Background="#FF"+this.configuration.screencolor;this.configuration.linkfromdisplay=="false"?this.display.addEventListener("MouseLeftButtonUp",jeroenwijering.utils.delegate(this.controller,this.controller.setPlay)):(this.display.addEventListener("MouseLeftButtonUp",jeroenwijering.utils.delegate(this.controller,this.controller.setLink)),this.display.findName("PlayIcon").Visibility="Collapsed");this.configuration.logo!=""&&(this.display.findName("OverlayCanvas").Visibility="Visible",this.display.findName("OverlayLogo").ImageSource=this.configuration.logo);this.controlbar.findName("ControlbarBack").Fill="#FF"+this.configuration.backcolor;this.assignButton("Play",this.controller.setPlay);this.assignButton("Stop",this.controller.setStop);this.configuration.sender.findName("ElapsedText").Foreground="#FF"+this.configuration.frontcolor;this.assignSlider("Time",this.changeTime);this.configuration.sender.findName("DownloadProgress").Fill="#FF"+this.configuration.frontcolor;this.configuration.sender.findName("RemainingText").Foreground="#FF"+this.configuration.frontcolor;this.assignButton("Link",this.controller.setLink);this.assignButton("Fullscreen",this.controller.setFullscreen);this.assignButton("Mute",this.controller.setMute);this.assignSlider("Volume",this.changeVolume)},assignButton:function(n,t){var i=this.configuration.sender.findName(n+"Button");i.Cursor="Hand";i.addEventListener("MouseLeftButtonUp",jeroenwijering.utils.delegate(this.controller,t));i.addEventListener("MouseEnter",jeroenwijering.utils.delegate(this,this.rollOver));i.addEventListener("MouseLeave",jeroenwijering.utils.delegate(this,this.rollOut));this.configuration.sender.findName(n+"Symbol").Fill="#FF"+this.configuration.frontcolor;try{this.configuration.sender.findName(n+"OffSymbol").Fill="#FF"+this.configuration.frontcolor}catch(r){}},assignSlider:function(n,t){var i=this.configuration.sender.findName(n+"Button");i.Cursor="Hand";i.addEventListener("MouseLeftButtonUp",jeroenwijering.utils.delegate(this,t));i.addEventListener("MouseEnter",jeroenwijering.utils.delegate(this,this.rollOver));i.addEventListener("MouseLeave",jeroenwijering.utils.delegate(this,this.rollOut));this.configuration.sender.findName(n+"Slider").Fill="#FF"+this.configuration.frontcolor;this.configuration.sender.findName(n+"Highlight").Fill="#FF"+this.configuration.frontcolor;this.configuration.sender.findName(n+"Symbol").Fill="#FF"+this.configuration.frontcolor},delegate:function(n,t){for(var i=0;i<this.listeners.length;i++)this.listeners[i].type.toUpperCase()==n&&this.listeners[i].func.apply(null,t)},rollOver:function(n){var t=n.Name.substr(0,n.Name.length-6);this.configuration.sender.findName(t+"Symbol").Fill="#FF"+this.configuration.lightcolor;try{this.configuration.sender.findName(t+"OffSymbol").Fill="#FF"+this.configuration.lightcolor}catch(i){}},rollOut:function(n){var t=n.Name.substr(0,n.Name.length-6);this.configuration.sender.findName(t+"Symbol").Fill="#FF"+this.configuration.frontcolor;try{this.configuration.sender.findName(t+"OffSymbol").Fill="#FF"+this.configuration.frontcolor}catch(i){}},changeTime:function(n,t){var i=n.findName("TimeSlider"),r=t.GetPosition(i).X,u=Math.floor(r/i.Width*this.configuration.duration);this.controller.setScrub(u)},changeVolume:function(n,t){var i=n.findName("VolumeButton"),r=t.GetPosition(i).X;this.controller.setVolume(r*5)},resizePlayer:function(){var n=this.configuration.sender.getHost().content.actualWidth,t=this.configuration.sender.getHost().content.actualHeight,i=this.configuration.sender.getHost().content.FullScreen;this.configuration.shownavigation=="true"?i==!0?(this.resizeDisplay(n,t),this.controlbar["Canvas.Left"]=Math.round(n/2-250),this.resizeControlbar(500,t-this.controlbar.Height-16),this.controlbar.findName("ControlbarBack").Opacity=.5):(this.resizeDisplay(n,t-20),this.controlbar["Canvas.Left"]=0,this.resizeControlbar(n,t-this.controlbar.Height),this.controlbar.findName("ControlbarBack").Opacity=1):this.resizeDisplay(n,t)},resizeDisplay:function(n,t){this.stretchElement("PlayerDisplay",n,t);this.stretchElement("VideoWindow",n,t);this.stretchElement("PlaceholderImage",n,t);this.centerElement("PlayIcon",n,t);this.centerElement("MuteIcon",n,t);this.centerElement("BufferIcon",n,t);this.centerElement("BufferText",n,t);this.display.findName("OverlayCanvas")["Canvas.Left"]=n-this.display.findName("OverlayCanvas").Width-10;this.display.Visibility="Visible"},resizeControlbar:function(n,t){var r,i,u;this.controlbar["Canvas.Top"]=t;this.stretchElement("PlayerControls",n);this.stretchElement("ControlbarBack",n);this.placeElement("PlayButton",0);r=17;this.placeElement("VolumeButton",n-24);this.placeElement("MuteButton",n-37);i=37;this.configuration.showstop=="true"?(this.placeElement("StopButton",r),r+=17):this.controlbar.findName("StopButton").Visibility="Collapsed";this.configuration.usefullscreen=="true"?(i+=18,this.placeElement("FullscreenButton",n-i)):this.controlbar.findName("FullscreenButton").Visibility="Collapsed";this.configuration.link!=""?(i+=18,this.placeElement("LinkButton",n-i)):this.controlbar.findName("LinkButton").Visibility="Collapsed";this.configuration.showdigits=="true"&&n-i-r>160?(i+=35,this.controlbar.findName("RemainingButton").Visibility="Visible",this.controlbar.findName("ElapsedButton").Visibility="Visible",this.placeElement("RemainingButton",n-i),this.placeElement("ElapsedButton",r),r+=35):(this.controlbar.findName("RemainingButton").Visibility="Collapsed",this.controlbar.findName("ElapsedButton").Visibility="Collapsed");this.placeElement("TimeButton",r);this.stretchElement("TimeButton",n-r-i);this.stretchElement("TimeShadow",n-r-i);this.stretchElement("TimeStroke",n-r-i);this.stretchElement("TimeFill",n-r-i);this.stretchElement("TimeSlider",n-r-i-10);this.stretchElement("DownloadProgress",n-r-i-10);u=this.configuration.sender.findName("TimeSymbol");this.stretchElement("TimeHighlight",u["Canvas.Left"]-5);this.controlbar.Visibility="Visible"},centerElement:function(n,t,i){var r=this.configuration.sender.findName(n);r["Canvas.Left"]=Math.round(t/2-r.Width/2);r["Canvas.Top"]=Math.round(i/2-r.Height/2)},stretchElement:function(n,t,i){var r=this.configuration.sender.findName(n);r.Width=t;i!=undefined&&(r.Height=i)},placeElement:function(n,t,i){var r=this.configuration.sender.findName(n);r["Canvas.Left"]=t;i&&(r["Canvas.Top"]=i)}};jeroenwijering.Model=function(n,t,i){this.configuration=n;this.controller=t;this.view=i;this.video=this.configuration.sender.findName("VideoWindow");this.preview=this.configuration.sender.findName("PlaceholderImage");var r={"true":"UniformToFill","false":"Uniform",fit:"Fill",none:"None"};this.state=this.video.CurrentState;this.timeint;this.video.Stretch=r[this.configuration.overstretch];this.preview.Stretch=r[this.configuration.overstretch];this.video.BufferingTime=jeroenwijering.utils.spanstring(this.configuration.bufferlength);this.video.AutoPlay=!0;this.video.AddEventListener("CurrentStateChanged",jeroenwijering.utils.delegate(this,this.stateChanged));this.video.AddEventListener("MediaEnded",jeroenwijering.utils.delegate(this,this.mediaEnded));this.video.AddEventListener("BufferingProgressChanged",jeroenwijering.utils.delegate(this,this.bufferChanged));this.video.AddEventListener("DownloadProgressChanged",jeroenwijering.utils.delegate(this,this.downloadChanged));this.configuration.image!=""&&(this.preview.Source=this.configuration.image)};jeroenwijering.Model.prototype={goPause:function(n){this.video.pause();isNaN(n)||(this.video.Position=jeroenwijering.utils.spanstring(n));this.timeChanged()},goStart:function(n){this.video.Visibility="Visible";this.preview.Visibility="Collapsed";this.state=="Closed"?this.video.Source=this.configuration.file:this.video.play();isNaN(n)||(this.video.Position=jeroenwijering.utils.spanstring(n))},goStop:function(){this.video.Visibility="Collapsed";this.preview.Visibility="Visible";this.goPause(0);this.video.Source="null";this.view.onBuffer(0);clearInterval(this.timeint)},goVolume:function(n){this.video.Volume=n/100},stateChanged:function(){var n=this.video.CurrentState;if(n!=this.state){this.controller.setState(this.state,n);this.view.onState(this.state,n);this.state=n;this.configuration.duration=Math.round(this.video.NaturalDuration.Seconds*10)/10;n!="Playing"&&n!="Buffering"&&n!="Opening"?clearInterval(this.timeint):this.timeint=setInterval(jeroenwijering.utils.delegate(this,this.timeChanged),100)}},mediaEnded:function(){if(this.configuration.repeat=="true")this.goStart(0);else{this.state="Completed";this.view.onState(this.state,"Completed");this.video.Visibility="Collapsed";this.preview.Visibility="Visible";this.goPause(0)}},bufferChanged:function(){var n=Math.round(this.video.BufferingProgress*100);this.view.onBuffer(n)},downloadChanged:function(){var n=Math.round(this.video.DownloadProgress*100);this.view.onLoad(n)},timeChanged:function(){try{var n=Math.round(this.video.Position.Seconds*10)/10;this.view.onTime(n,this.configuration.duration)}catch(t){window.clearInterval(this.timeint)}}};jeroenwijering.utils.delegate=function(n,t){return function(){return t.apply(n,arguments)}};jeroenwijering.utils.timestring=function(n){var u=Math.floor(n/3600),i=Math.floor(n%3600/60),r=Math.round(n%60),t="";return t+=r>9?r:"0"+r,t=i>9?i+":"+t:"0"+i+":"+t,u>0?t=u+":"+t:null,t};jeroenwijering.utils.spanstring=function(n){var t=Math.floor(n/3600),i=Math.floor(n%3600/60),r=Math.round(n%60*10)/10;return t+":"+i+":"+r};