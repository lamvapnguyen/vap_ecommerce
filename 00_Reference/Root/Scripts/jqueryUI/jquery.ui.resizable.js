(function(n){n.widget("ui.resizable",n.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var i=this,t=this.options,f,u;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!t.aspectRatio,aspectRatio:t.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:t.helper||t.ghost||t.animate?t.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(/relative/.test(this.element.css("position"))&&n.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"}),this.element.wrap(n('<div class="ui-wrapper" style="overflow: hidden;"><\/div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=t.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String)for(this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),f=this.handles.split(","),this.handles={},u=0;u<f.length;u++){var r=n.trim(f[u]),o="ui-resizable-"+r,e=n('<div class="ui-resizable-handle '+o+'"><\/div>');/sw|se|ne|nw/.test(r)&&e.css({zIndex:++t.zIndex});"se"==r&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[r]=".ui-resizable-"+r;this.element.append(e)}this._renderAxis=function(t){var i,r,u,f;t=t||this.element;for(i in this.handles)this.handles[i].constructor==String&&(this.handles[i]=n(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=n(this.handles[i],this.element),u=0,u=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth(),f=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(f,u),this._proportionallyResize()),!n(this.handles[i]).length};this._renderAxis(this.element);this._handles=n(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!i.resizing){if(this.className)var n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);i.axis=n&&n[1]?n[1]:"se"}});t.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").hover(function(){n(this).removeClass("ui-resizable-autohide");i._handles.show()},function(){i.resizing||(n(this).addClass("ui-resizable-autohide"),i._handles.hide())}));this._mouseInit()},destroy:function(){var i,t;return this._mouseDestroy(),i=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()},this.elementIsWrapper&&(i(this.element),t=this.element,t.after(this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")})).remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var r in this.handles)n(this.handles[r])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var u=this.options,s=this.element.position(),r=this.element,f,e,o;return this.resizing=!0,this.documentScroll={top:n(document).scrollTop(),left:n(document).scrollLeft()},(r.is(".ui-draggable")||/absolute/.test(r.css("position")))&&r.css({position:"absolute",top:s.top,left:s.left}),n.browser.opera&&/relative/.test(r.css("position"))&&r.css({position:"relative",top:"auto",left:"auto"}),this._renderProxy(),f=i(this.helper.css("left")),e=i(this.helper.css("top")),u.containment&&(f+=n(u.containment).scrollLeft()||0,e+=n(u.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:f,top:e},this.size=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.originalPosition={left:f,top:e},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof u.aspectRatio=="number"?u.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor",o=="auto"?this.axis+"-resize":o),r.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var f=this.helper,h=this.options,c=this,r=this.originalMousePosition,e=this.axis,o=t.pageX-r.left||0,s=t.pageY-r.top||0,u=this._change[e];if(!u)return!1;var i=u.apply(this,[t,o,s]),l=n.browser.msie&&n.browser.version<7,a=this.sizeDiff;return(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._propagate("resize",t),f.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(i),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){var r,i;if(this.resizing=!1,r=this.options,i=this,this._helper){var u=this._proportionallyResizeElements,f=u.length&&/textarea/i.test(u[0].nodeName),e=f&&n.ui.hasScroll(u[0],"left")?0:i.sizeDiff.height,o=f?0:i.sizeDiff.width,s={width:i.size.width-o,height:i.size.height-e},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;r.animate||this.element.css(n.extend(s,{top:c,left:h}));i.helper.height(i.size.height);i.helper.width(i.size.width);this._helper&&!r.animate&&this._proportionallyResize()}return n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateCache:function(n){var i=this.options;this.offset=this.helper.offset();t(n.left)&&(this.position.left=n.left);t(n.top)&&(this.position.top=n.top);t(n.height)&&(this.size.height=n.height);t(n.width)&&(this.size.width=n.width)},_updateRatio:function(n){var u=this.options,i=this.position,t=this.size,r=this.axis;return n.height?n.width=t.height*this.aspectRatio:n.width&&(n.height=t.width/this.aspectRatio),r=="sw"&&(n.left=i.left+(t.width-n.width),n.top=null),r=="nw"&&(n.top=i.top+(t.height-n.height),n.left=i.left+(t.width-n.width)),n},_respectSize:function(n,i){var y=this.helper,r=this.options,p=this._aspectRatio||i.shiftKey,f=this.axis,e=t(n.width)&&r.maxWidth&&r.maxWidth<n.width,o=t(n.height)&&r.maxHeight&&r.maxHeight<n.height,s=t(n.width)&&r.minWidth&&r.minWidth>n.width,h=t(n.height)&&r.minHeight&&r.minHeight>n.height,u;s&&(n.width=r.minWidth);h&&(n.height=r.minHeight);e&&(n.width=r.maxWidth);o&&(n.height=r.maxHeight);var c=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,a=/sw|nw|w/.test(f),v=/nw|ne|n/.test(f);return s&&a&&(n.left=c-r.minWidth),e&&a&&(n.left=c-r.maxWidth),h&&v&&(n.top=l-r.minHeight),o&&v&&(n.top=l-r.maxHeight),u=!n.width&&!n.height,u&&!n.left&&n.top?n.top=null:u&&!n.top&&n.left&&(n.left=null),n},_proportionallyResize:function(){var e=this.options,i,r,t,u,f;if(this._proportionallyResizeElements.length)for(i=this.helper||this.element,r=0;r<this._proportionallyResizeElements.length;r++)(t=this._proportionallyResizeElements[r],this.borderDif||(u=[t.css("borderTopWidth"),t.css("borderRightWidth"),t.css("borderBottomWidth"),t.css("borderLeftWidth")],f=[t.css("paddingTop"),t.css("paddingRight"),t.css("paddingBottom"),t.css("paddingLeft")],this.borderDif=n.map(u,function(n,t){var i=parseInt(n,10)||0,r=parseInt(f[t],10)||0;return i+r})),n.browser.msie&&(n(i).is(":hidden")||n(i).parents(":hidden").length))||t.css({height:i.height()-this.borderDif[0]-this.borderDif[2]||0,width:i.width()-this.borderDif[1]-this.borderDif[3]||0})},_renderProxy:function(){var u=this.element,f=this.options;if(this.elementOffset=u.offset(),this._helper){this.helper=this.helper||n('<div style="overflow:hidden;"><\/div>');var t=n.browser.msie&&n.browser.version<7,i=t?1:0,r=t?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+r,height:this.element.outerHeight()+r,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++f.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(n,t){return{width:this.originalSize.width+t}},w:function(n,t){var u=this.options,i=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:i.width-t}},n:function(n,t,i){var f=this.options,r=this.originalSize,u=this.originalPosition;return{top:u.top+i,height:r.height-i}},s:function(n,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){n.ui.plugin.call(this,t,[i,this.ui()]);t!="resize"&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});n.extend(n.ui.resizable,{version:"@VERSION"});n.ui.plugin.add("resizable","alsoResize",{start:function(){var r=n(this).data("resizable"),t=r.options,i=function(t){n(t).each(function(){var t=n(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10),position:t.css("position")})})};typeof t.alsoResize!="object"||t.alsoResize.parentNode?i(t.alsoResize):t.alsoResize.length?(t.alsoResize=t.alsoResize[0],i(t.alsoResize)):n.each(t.alsoResize,function(n){i(n)})},resize:function(t,i){var r=n(this).data("resizable"),u=r.options,f=r.originalSize,e=r.originalPosition,s={height:r.size.height-f.height||0,width:r.size.width-f.width||0,top:r.position.top-e.top||0,left:r.position.left-e.left||0},o=function(t,u){n(t).each(function(){var t=n(this),e=n(this).data("resizable-alsoresize"),f={},o=u&&u.length?u:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(o,function(n,t){var i=(e[t]||0)+(s[t]||0);i&&i>=0&&(f[t]=i||null)});n.browser.opera&&/relative/.test(t.css("position"))&&(r._revertToRelativePosition=!0,t.css({position:"absolute",top:"auto",left:"auto"}));t.css(f)})};typeof u.alsoResize!="object"||u.alsoResize.nodeType?o(u.alsoResize):n.each(u.alsoResize,function(n,t){o(n,t)})},stop:function(){var i=n(this).data("resizable"),t=i.options,r=function(t){n(t).each(function(){var t=n(this);t.css({position:t.data("resizable-alsoresize").position})})};i._revertToRelativePosition&&(i._revertToRelativePosition=!1,typeof t.alsoResize!="object"||t.alsoResize.nodeType?r(t.alsoResize):n.each(t.alsoResize,function(n){r(n)}));n(this).removeData("resizable-alsoresize")}});n.ui.plugin.add("resizable","animate",{stop:function(t){var i=n(this).data("resizable"),u=i.options,r=i._proportionallyResizeElements,f=r.length&&/textarea/i.test(r[0].nodeName),s=f&&n.ui.hasScroll(r[0],"left")?0:i.sizeDiff.height,h=f?0:i.sizeDiff.width,c={width:i.size.width-h,height:i.size.height-s},e=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,o=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(n.extend(c,o&&e?{top:o,left:e}:{}),{duration:u.animateDuration,easing:u.animateEasing,step:function(){var u={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};r&&r.length&&n(r[0]).css({width:u.width,height:u.height});i._updateCache(u);i._propagate("resize",t)}})}});n.ui.plugin.add("resizable","containment",{start:function(){var t=n(this).data("resizable"),s=t.options,h=t.element,u=s.containment,r=u instanceof n?u.get(0):/parent/.test(u)?h.parent().get(0):u,f,e;if(r)if(t.containerElement=n(r),/document/.test(u)||u==document)t.containerOffset={left:0,top:0},t.containerPosition={left:0,top:0},t.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight};else{f=n(r);e=[];n(["Top","Right","Left","Bottom"]).each(function(n,t){e[n]=i(f.css("padding"+t))});t.containerOffset=f.offset();t.containerPosition=f.position();t.containerSize={height:f.innerHeight()-e[3],width:f.innerWidth()-e[1]};var o=t.containerOffset,c=t.containerSize.height,l=t.containerSize.width,a=n.ui.hasScroll(r,"left")?r.scrollWidth:l,v=n.ui.hasScroll(r)?r.scrollHeight:c;t.parentData={element:r,left:o.left,top:o.top,width:a,height:v}}},resize:function(t){var i=n(this).data("resizable"),e=i.options,v=i.containerSize,r=i.containerOffset,y=i.size,s=i.position,f=i._aspectRatio||t.shiftKey,u={top:0,left:0},h=i.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(u=r);s.left<(i._helper?r.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-r.left:i.position.left-u.left),f&&(i.size.height=i.size.width/e.aspectRatio),i.position.left=e.helper?r.left:0);s.top<(i._helper?r.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-r.top:i.position.top),f&&(i.size.width=i.size.height*e.aspectRatio),i.position.top=i._helper?r.top:0);i.offset.left=i.parentData.left+i.position.left;i.offset.top=i.parentData.top+i.position.top;var o=Math.abs((i._helper?i.offset.left-u.left:i.offset.left-u.left)+i.sizeDiff.width),c=Math.abs((i._helper?i.offset.top-u.top:i.offset.top-r.top)+i.sizeDiff.height),l=i.containerElement.get(0)==i.element.parent().get(0),a=/relative|absolute/.test(i.containerElement.css("position"));l&&a&&(o-=i.parentData.left);o+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-o,f&&(i.size.height=i.size.width/i.aspectRatio));c+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-c,f&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var t=n(this).data("resizable"),r=t.options,c=t.position,u=t.containerOffset,f=t.containerPosition,e=t.containerElement,i=n(t.helper),o=i.offset(),s=i.outerWidth()-t.sizeDiff.width,h=i.outerHeight()-t.sizeDiff.height;t._helper&&!r.animate&&/relative/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h});t._helper&&!r.animate&&/static/.test(e.css("position"))&&n(this).css({left:o.left-f.left-u.left,width:s,height:h})}});n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).data("resizable"),i=t.options,r=t.size;t.ghost=t.originalElement.clone();t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:"");t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).data("resizable"),i=t.options;t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).data("resizable"),i=t.options;t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}});n.ui.plugin.add("resizable","grid",{resize:function(t){var i=n(this).data("resizable"),r=i.options,h=i.size,u=i.originalSize,o=i.originalPosition,s=i.axis,c=r._aspectRatio||t.shiftKey,f,e;r.grid=typeof r.grid=="number"?[r.grid,r.grid]:r.grid;f=Math.round((h.width-u.width)/(r.grid[0]||1))*(r.grid[0]||1);e=Math.round((h.height-u.height)/(r.grid[1]||1))*(r.grid[1]||1);/^(se|s|e)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e):/^(ne)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e,i.position.top=o.top-e):/^(sw)$/.test(s)?(i.size.width=u.width+f,i.size.height=u.height+e,i.position.left=o.left-f):(i.size.width=u.width+f,i.size.height=u.height+e,i.position.top=o.top-e,i.position.left=o.left-f)}});var i=function(n){return parseInt(n,10)||0},t=function(n){return!isNaN(parseInt(n,10))}})(jQuery);