(function(){var t=tinymce.DOM;tinymce.create("tinymce.plugins.FullScreenPlugin",{init:function(i,r){var f=this,u={},e,o;f.editor=i;i.addCommand("mceFullScreen",function(){var h,s=t.doc.documentElement;if(i.getParam("fullscreen_is_enabled")){i.getParam("fullscreen_new_window")?closeFullscreen():t.win.setTimeout(function(){tinymce.dom.Event.remove(t.win,"resize",f.resizeFunc);tinyMCE.get(i.getParam("fullscreen_editor_id")).setContent(i.getContent({format:"raw"}),{format:"raw"});tinyMCE.remove(i);t.remove("mce_fullscreen_container");s.style.overflow=i.getParam("fullscreen_html_overflow");t.setStyle(t.doc.body,"overflow",i.getParam("fullscreen_overflow"));t.win.scrollTo(i.getParam("fullscreen_scrollx"),i.getParam("fullscreen_scrolly"));tinyMCE.settings=tinyMCE.oldSettings},10);return}if(i.getParam("fullscreen_new_window")){h=t.win.open(r+"/fullscreen.htm","mceFullScreenPopup","fullscreen=yes,menubar=no,toolbar=no,scrollbars=no,resizable=yes,left=0,top=0,width="+screen.availWidth+",height="+screen.availHeight);try{h.resizeTo(screen.availWidth,screen.availHeight)}catch(c){}}else tinyMCE.oldSettings=tinyMCE.settings,u.fullscreen_overflow=t.getStyle(t.doc.body,"overflow",1)||"auto",u.fullscreen_html_overflow=t.getStyle(s,"overflow",1),e=t.getViewPort(),u.fullscreen_scrollx=e.x,u.fullscreen_scrolly=e.y,tinymce.isOpera&&u.fullscreen_overflow=="visible"&&(u.fullscreen_overflow="auto"),tinymce.isIE&&u.fullscreen_overflow=="scroll"&&(u.fullscreen_overflow="auto"),tinymce.isIE&&(u.fullscreen_html_overflow=="visible"||u.fullscreen_html_overflow=="scroll")&&(u.fullscreen_html_overflow="auto"),u.fullscreen_overflow=="0px"&&(u.fullscreen_overflow=""),t.setStyle(t.doc.body,"overflow","hidden"),s.style.overflow="hidden",e=t.getViewPort(),t.win.scrollTo(0,0),tinymce.isIE&&(e.h-=1),o=tinymce.isIE6?"absolute;top:"+e.y:"fixed;top:0",n=t.add(t.doc.body,"div",{id:"mce_fullscreen_container",style:"position:"+o+";left:0;width:"+e.w+"px;height:"+e.h+"px;z-index:200000;"}),t.add(n,"div",{id:"mce_fullscreen"}),tinymce.each(i.settings,function(n,t){u[t]=n}),u.id="mce_fullscreen",u.width=n.clientWidth,u.height=n.clientHeight-15,u.fullscreen_is_enabled=!0,u.fullscreen_editor_id=i.id,u.theme_advanced_resizing=!1,u.save_onsavecallback=function(){i.setContent(tinyMCE.get(u.id).getContent({format:"raw"}),{format:"raw"});i.execCommand("mceSave")},tinymce.each(i.getParam("fullscreen_settings"),function(n,t){u[t]=n}),u.theme_advanced_toolbar_location==="external"&&(u.theme_advanced_toolbar_location="top"),f.fullscreenEditor=new tinymce.Editor("mce_fullscreen",u),f.fullscreenEditor.onInit.add(function(){f.fullscreenEditor.setContent(i.getContent());f.fullscreenEditor.focus()}),f.fullscreenEditor.render(),f.fullscreenElement=new tinymce.dom.Element("mce_fullscreen_container"),f.fullscreenElement.update(),f.resizeFunc=tinymce.dom.Event.add(t.win,"resize",function(){var r=tinymce.DOM.getViewPort(),n=f.fullscreenEditor,t,i;t=n.dom.getSize(n.getContainer().firstChild);i=n.dom.getSize(n.getContainer().getElementsByTagName("iframe")[0]);n.theme.resizeTo(r.w-t.w+i.w,r.h-t.h+i.h)})});i.addButton("fullscreen",{title:"fullscreen.desc",cmd:"mceFullScreen"});i.onNodeChange.add(function(n,t){t.setActive("fullscreen",n.getParam("fullscreen_is_enabled"))})},getInfo:function(){return{longname:"Fullscreen",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",infourl:"http://wiki.moxiecode.com/index.php/TinyMCE:Plugins/fullscreen",version:tinymce.majorVersion+"."+tinymce.minorVersion}}});tinymce.PluginManager.add("fullscreen",tinymce.plugins.FullScreenPlugin)})();