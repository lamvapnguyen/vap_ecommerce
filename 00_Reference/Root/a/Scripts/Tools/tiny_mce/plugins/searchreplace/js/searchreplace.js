tinyMCEPopup.requireLangPack();var SearchReplaceDialog={init:function(){var t=this,i=document.forms[0],n=tinyMCEPopup.getWindowArg("mode");t.switchMode(n);i[n+"_panel_searchstring"].value=tinyMCEPopup.getWindowArg("search_string");i[n+"_panel_searchstring"].focus();mcTabs.onChange.add(function(n){t.switchMode(n.substring(0,n.indexOf("_")))})},switchMode:function(n){var t,i=this.lastMode;i!=n&&(t=document.forms[0],i&&(t[n+"_panel_searchstring"].value=t[i+"_panel_searchstring"].value,t[n+"_panel_backwardsu"].checked=t[i+"_panel_backwardsu"].checked,t[n+"_panel_backwardsd"].checked=t[i+"_panel_backwardsd"].checked,t[n+"_panel_casesensitivebox"].checked=t[i+"_panel_casesensitivebox"].checked),mcTabs.displayTab(n+"_tab",n+"_panel"),document.getElementById("replaceBtn").style.display=n=="replace"?"inline":"none",document.getElementById("replaceAllBtn").style.display=n=="replace"?"inline":"none",this.lastMode=n)},searchNext:function(n){function a(){i=f.getRng().cloneRange();t.getDoc().execCommand("SelectAll",!1,null);f.setRng(i)}function c(){t.selection.setContent(rs)}var t=tinyMCEPopup.editor,f=t.selection,i=f.getRng(),e,s=this.lastMode,r,u,o=0,l=t.getWin(),v=t.windowManager,h=0;if(e=document.forms[0],r=e[s+"_panel_searchstring"].value,u=e[s+"_panel_backwardsu"].checked,ca=e[s+"_panel_casesensitivebox"].checked,rs=e.replace_panel_replacestring.value,tinymce.isIE&&(i=t.getDoc().selection.createRange()),r!=""){ca&&(o=o|4);switch(n){case"all":if(t.execCommand("SelectAll"),t.selection.collapse(!0),tinymce.isIE){for(t.focus(),i=t.getDoc().selection.createRange();i.findText(r,u?-1:1,o);)i.scrollIntoView(),i.select(),c(),h=1,u&&i.moveEnd("character",-rs.length);tinyMCEPopup.storeSelection()}else while(l.find(r,ca,u,!1,!1,!1,!1))c(),h=1;h?tinyMCEPopup.alert(t.getLang("searchreplace_dlg.allreplaced")):tinyMCEPopup.alert(t.getLang("searchreplace_dlg.notfound"));return;case"current":t.selection.isCollapsed()||c()}(f.collapse(u),i=f.getRng(),r)&&(tinymce.isIE?(t.focus(),i=t.getDoc().selection.createRange(),i.findText(r,u?-1:1,o)?(i.scrollIntoView(),i.select()):tinyMCEPopup.alert(t.getLang("searchreplace_dlg.notfound")),tinyMCEPopup.storeSelection()):l.find(r,ca,u,!1,!1,!1,!1)?a():tinyMCEPopup.alert(t.getLang("searchreplace_dlg.notfound")))}}};tinyMCEPopup.onInit.add(SearchReplaceDialog.init,SearchReplaceDialog);