var Validator={isEmail:function(n){return this.test(n,"^[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+@[-!#$%&'*+\\/0-9=?A-Z^_`a-z{|}~]+.[-!#$%&'*+\\./0-9=?A-Z^_`a-z{|}~]+$")},isAbsUrl:function(n){return this.test(n,"^(news|telnet|nttp|file|http|ftp|https)://[-A-Za-z0-9\\.]+\\/?.*$")},isSize:function(n){return this.test(n,"^[0-9]+(%|in|cm|mm|em|ex|pt|pc|px)?$")},isId:function(n){return this.test(n,"^[A-Za-z_]([A-Za-z0-9_])*$")},isEmpty:function(n){var i,t;if(n.nodeName=="SELECT"&&n.selectedIndex<1||n.type=="checkbox"&&!n.checked)return!0;if(n.type=="radio"){for(t=0,i=n.form.elements;t<i.length;t++)if(i[t].type=="radio"&&i[t].name==n.name&&i[t].checked)return!1;return!0}return new RegExp("^\\s*$").test(n.nodeType==1?n.value:n)},isNumber:function(n,t){return!isNaN(n.nodeType==1?n.value:n)&&(!t||!this.test(n,"^-?[0-9]*\\.[0-9]*$"))},test:function(n,t){return n=n.nodeType==1?n.value:n,n==""||new RegExp(t).test(n)}},AutoValidator={settings:{id_cls:"id",int_cls:"int",url_cls:"url",number_cls:"number",email_cls:"email",size_cls:"size",required_cls:"required",invalid_cls:"invalid",min_cls:"min",max_cls:"max"},init:function(n){for(var t in n)this.settings[t]=n[t]},validate:function(n){for(var u=this.settings,r=0,i=this.tags(n,"label"),t=0;t<i.length;t++)this.removeClass(i[t],u.invalid_cls),i[t].setAttribute("aria-invalid",!1);return r+=this.validateElms(n,"input"),r+=this.validateElms(n,"select"),r+=this.validateElms(n,"textarea"),r==3},invalidate:function(n){this.mark(n.form,n)},getErrorMessages:function(n){for(var r=this.settings,u,e,o=[],f=tinyMCEPopup.editor,i=this.tags(n,"label"),t=0;t<i.length;t++)this.hasClass(i[t],r.invalid_cls)&&(u=document.getElementById(i[t].getAttribute("for")),e={field:i[t].textContent},this.hasClass(u,r.min_cls,!0)?(message=f.getLang("invalid_data_min"),e.min=this.getNum(u,r.min_cls)):message=this.hasClass(u,r.number_cls)?f.getLang("invalid_data_number"):this.hasClass(u,r.size_cls)?f.getLang("invalid_data_size"):f.getLang("invalid_data"),message=message.replace(/{\#([^}]+)\}/g,function(n,t){return e[t]||"{#"+t+"}"}),o.push(message));return o},reset:function(n){var u=["label","input","select","textarea"],i,t,r,f=this.settings;if(n!=null)for(i=0;i<u.length;i++)for(r=this.tags(n.form?n.form:n,u[i]),t=0;t<r.length;t++)this.removeClass(r[t],f.invalid_cls),r[t].setAttribute("aria-invalid",!1)},validateElms:function(n,t){for(var i,r=this.settings,u=!0,f=Validator,e,s=this.tags(n,t),o=0;o<s.length;o++)i=s[o],this.removeClass(i,r.invalid_cls),this.hasClass(i,r.required_cls)&&f.isEmpty(i)&&(u=this.mark(n,i)),this.hasClass(i,r.number_cls)&&!f.isNumber(i)&&(u=this.mark(n,i)),this.hasClass(i,r.int_cls)&&!f.isNumber(i,!0)&&(u=this.mark(n,i)),this.hasClass(i,r.url_cls)&&!f.isAbsUrl(i)&&(u=this.mark(n,i)),this.hasClass(i,r.email_cls)&&!f.isEmail(i)&&(u=this.mark(n,i)),this.hasClass(i,r.size_cls)&&!f.isSize(i)&&(u=this.mark(n,i)),this.hasClass(i,r.id_cls)&&!f.isId(i)&&(u=this.mark(n,i)),this.hasClass(i,r.min_cls,!0)&&(e=this.getNum(i,r.min_cls),(isNaN(e)||parseInt(i.value)<parseInt(e))&&(u=this.mark(n,i))),this.hasClass(i,r.max_cls,!0)&&(e=this.getNum(i,r.max_cls),(isNaN(e)||parseInt(i.value)>parseInt(e))&&(u=this.mark(n,i)));return u},hasClass:function(n,t,i){return new RegExp("\\b"+t+(i?"[0-9]+":"")+"\\b","g").test(n.className)},getNum:function(n,t){return t=n.className.match(new RegExp("\\b"+t+"([0-9]+)\\b","g"))[0],t.replace(/[^0-9]/g,"")},addClass:function(n,t,i){var r=this.removeClass(n,t);n.className=i?t+(r!=""?" "+r:""):(r!=""?r+" ":"")+t},removeClass:function(n,t){return t=n.className.replace(new RegExp("(^|\\s+)"+t+"(\\s+|$)")," "),n.className=t!=" "?t:""},tags:function(n,t){return n.getElementsByTagName(t)},mark:function(n,t){var i=this.settings;return this.addClass(t,i.invalid_cls),t.setAttribute("aria-invalid","true"),this.markLabels(n,t,i.invalid_cls),!1},markLabels:function(n,t,i){for(var u=this.tags(n,"label"),r=0;r<u.length;r++)(u[r].getAttribute("for")==t.id||u[r].htmlFor==t.id)&&this.addClass(u[r],i);return null}};