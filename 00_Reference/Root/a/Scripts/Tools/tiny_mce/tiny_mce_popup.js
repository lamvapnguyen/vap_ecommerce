var tinymce=null,tinyMCEPopup,tinyMCE;tinyMCEPopup={init:function(){var n=this,t;t=n.getWin();tinymce=t.tinymce;tinyMCE=t.tinyMCE;n.editor=tinymce.EditorManager.activeEditor;n.params=n.editor.windowManager.params;n.features=n.editor.windowManager.features;n.dom=n.editor.windowManager.createInstance("tinymce.dom.DOMUtils",document);n.features.popup_css!==!1&&n.dom.loadCSS(n.features.popup_css||n.editor.settings.popup_css);n.listeners=[];n.onInit={add:function(t,i){n.listeners.push({func:t,scope:i})}};n.isWindow=!n.getWindowArg("mce_inline");n.id=n.getWindowArg("mce_window_id");n.editor.windowManager.onOpen.dispatch(n.editor.windowManager,window)},getWin:function(){return!window.frameElement&&window.dialogArguments||opener||parent||top},getWindowArg:function(n,t){var i=this.params[n];return tinymce.is(i)?i:t},getParam:function(n,t){return this.editor.getParam(n,t)},getLang:function(n,t){return this.editor.getLang(n,t)},execCommand:function(n,t,i,r){return r=r||{},r.skip_focus=1,this.restoreSelection(),this.editor.execCommand(n,t,i,r)},resizeToInnerSize:function(){var n=this;setTimeout(function(){var t=n.dom.getViewPort(window);n.editor.windowManager.resizeBy(n.getWindowArg("mce_width")-t.w,n.getWindowArg("mce_height")-t.h,n.id||window)},10)},executeOnLoad:function(n){this.onInit.add(function(){eval(n)})},storeSelection:function(){this.editor.windowManager.bookmark=tinyMCEPopup.editor.selection.getBookmark(1)},restoreSelection:function(){var n=tinyMCEPopup;!n.isWindow&&tinymce.isIE&&n.editor.selection.moveToBookmark(n.editor.windowManager.bookmark)},requireLangPack:function(){var n=this,t=n.getWindowArg("plugin_url")||n.getWindowArg("theme_url");t&&n.editor.settings.language&&n.features.translate_i18n!==!1&&n.editor.settings.language_load!==!1&&(t+="/langs/"+n.editor.settings.language+"_dlg.js",tinymce.ScriptLoader.isDone(t)||(document.write('<script type="text/javascript" src="'+tinymce._addVer(t)+'"><\/script>'),tinymce.ScriptLoader.markDone(t)))},pickColor:function(n,t){this.execCommand("mceColorPicker",!0,{color:document.getElementById(t).value,func:function(n){document.getElementById(t).value=n;try{document.getElementById(t).onchange()}catch(i){}}})},openBrowser:function(n,t){tinyMCEPopup.restoreSelection();this.editor.execCallback("file_browser_callback",n,document.getElementById(n).value,t,window)},confirm:function(n,t,i){this.editor.windowManager.confirm(n,t,i,window)},alert:function(n,t,i){this.editor.windowManager.alert(n,t,i,window)},close:function(){function t(){n.editor.windowManager.close(window);tinymce=tinyMCE=n.editor=n.params=n.dom=n.dom.doc=null}var n=this;tinymce.isOpera?n.getWin().setTimeout(t,0):t()},_restoreSelection:function(){var n=window.event.srcElement;n.nodeName=="INPUT"&&(n.type=="submit"||n.type=="button")&&tinyMCEPopup.restoreSelection()},_onDOMLoaded:function(){var n=tinyMCEPopup,r=document.title,i,t;n.domLoaded||(n.domLoaded=1,n.features.translate_i18n!==!1&&(i=document.body.innerHTML,tinymce.isIE&&(i=i.replace(/ (value|title|alt)=([^"][^\s>]+)/gi,' $1="$2"')),document.dir=n.editor.getParam("directionality",""),(t=n.editor.translate(i))&&t!=i&&(document.body.innerHTML=t),(t=n.editor.translate(r))&&t!=r&&(document.title=r=t)),n.editor.getParam("browser_preferred_colors",!1)&&n.isWindow||n.dom.addClass(document.body,"forceColors"),document.body.style.display="",tinymce.isIE&&(document.attachEvent("onmouseup",tinyMCEPopup._restoreSelection),n.dom.add(n.dom.select("head")[0],"base",{target:"_self"})),n.restoreSelection(),n.resizeToInnerSize(),n.isWindow?window.focus():n.editor.windowManager.setTitle(window,r),tinymce.isIE||n.isWindow||tinymce.dom.Event._add(document,"focus",function(){n.editor.windowManager.focus(n.id)}),tinymce.each(n.dom.select("select"),function(n){n.onkeydown=tinyMCEPopup._accessHandler}),tinymce.each(n.listeners,function(t){t.func.call(t.scope,n.editor)}),n.getWindowArg("mce_auto_focus",!0)&&(window.focus(),tinymce.each(document.forms,function(t){tinymce.each(t.elements,function(t){if(n.dom.hasClass(t,"mceFocus")&&!t.disabled)return t.focus(),!1})})),document.onkeyup=tinyMCEPopup._closeWinKeyHandler)},_accessHandler:function(n){return n=n||window.event,n.keyCode==13||n.keyCode==32?(n=n.target||n.srcElement,n.onchange&&n.onchange(),tinymce.dom.Event.cancel(n)):void 0},_closeWinKeyHandler:function(n){n=n||window.event;n.keyCode==27&&tinyMCEPopup.close()},_wait:function(){document.attachEvent?(document.attachEvent("onreadystatechange",function(){document.readyState==="complete"&&(document.detachEvent("onreadystatechange",arguments.callee),tinyMCEPopup._onDOMLoaded())}),document.documentElement.doScroll&&window==window.top&&function(){if(!tinyMCEPopup.domLoaded){try{document.documentElement.doScroll("left")}catch(n){setTimeout(arguments.callee,0);return}tinyMCEPopup._onDOMLoaded()}}(),document.attachEvent("onload",tinyMCEPopup._onDOMLoaded)):document.addEventListener&&(window.addEventListener("DOMContentLoaded",tinyMCEPopup._onDOMLoaded,!1),window.addEventListener("load",tinyMCEPopup._onDOMLoaded,!1))}};tinyMCEPopup.init();tinyMCEPopup._wait();