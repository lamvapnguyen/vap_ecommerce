(function(n){var t=n.DOM,i=n.dom.Event,o=n.extend,r=n.each,f=n.util.Cookie,e,u=n.explode;n.ThemeManager.requireLangPack("advanced");n.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(i,u){var e=this,f,h,s;e.editor=i;e.url=u;e.onResolveName=new n.util.Dispatcher(this);e.settings=f=o({theme_advanced_path:!0,theme_advanced_toolbar_location:"bottom",theme_advanced_buttons1:"bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect",theme_advanced_buttons2:"bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code",theme_advanced_buttons3:"hr,removeformat,visualaid,|,sub,sup,|,charmap",theme_advanced_blockformats:"p,address,pre,h1,h2,h3,h4,h5,h6",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",readonly:i.settings.readonly},i.settings);f.font_size_style_values||(f.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt");n.is(f.theme_advanced_font_sizes,"string")&&(f.font_size_style_values=n.explode(f.font_size_style_values),f.font_size_classes=n.explode(f.font_size_classes||""),s={},i.settings.theme_advanced_font_sizes=f.theme_advanced_font_sizes,r(i.getParam("theme_advanced_font_sizes","","hash"),function(n,t){var i;t==n&&n>=1&&n<=7&&(t=n+" ("+e.sizes[n-1]+"pt)",i=f.font_size_classes[n-1],n=f.font_size_style_values[n-1]||e.sizes[n-1]+"pt");/^\s*\./.test(n)&&(i=n.replace(/\./g,""));s[t]=i?{"class":i}:{fontSize:n}}),f.theme_advanced_font_sizes=s);(h=f.theme_advanced_path_location)&&h!="none"&&(f.theme_advanced_statusbar_location=f.theme_advanced_path_location);f.theme_advanced_statusbar_location=="none"&&(f.theme_advanced_statusbar_location=0);i.onInit.add(function(){i.settings.readonly||i.onNodeChange.add(e._nodeChanged,e);i.settings.content_css!==!1&&i.dom.loadCSS(i.baseURI.toAbsolute(u+"/skins/"+i.settings.skin+"/content.css"))});i.onSetProgressState.add(function(n,i,r){var u,o=n.id,f;i?e.progressTimer=setTimeout(function(){u=n.getContainer();u=u.insertBefore(t.create("DIV",{style:"position:relative"}),u.firstChild);f=t.get(n.id+"_tbl");t.add(u,"div",{id:o+"_blocker","class":"mceBlocker",style:{width:f.clientWidth+2,height:f.clientHeight+2}});t.add(u,"div",{id:o+"_progress","class":"mceProgress",style:{left:f.clientWidth/2,top:f.clientHeight/2}})},r||0):(t.remove(o+"_blocker"),t.remove(o+"_progress"),clearTimeout(e.progressTimer))});t.loadCSS(f.editor_css?i.documentBaseURI.toAbsolute(f.editor_css):u+"/skins/"+i.settings.skin+"/ui.css");f.skin_variant&&t.loadCSS(u+"/skins/"+i.settings.skin+"/ui_"+f.skin_variant+".css")},createControl:function(n,t){var i,r;if(r=t.createControl(n))return r;switch(n){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if(i=this.controls[n])return t.createButton(n,{title:"advanced."+i[0],cmd:i[1],ui:i[2],value:i[3]})},execCommand:function(n,t,i){var r=this["_"+n];return r?(r.call(this,t,i),!0):!1},_importClasses:function(){var n=this.editor,t=n.controlManager.get("styleselect");t.getLength()==0&&r(n.dom.getClasses(),function(i,r){var u="style_"+r;n.formatter.register(u,{inline:"span",attributes:{"class":i["class"]},selector:"*"});t.add(i["class"],u)})},_createStyleSelect:function(){var t=this,n=t.editor,f=n.controlManager,u;return u=f.createListBox("styleselect",{title:"advanced.style_select",onselect:function(t){var i,f=[];return r(u.items,function(n){f.push(n.value)}),n.focus(),n.undoManager.add(),i=n.formatter.matchAll(f),t&&i[0]!=t?n.formatter.apply(t):n.formatter.remove(i[0]),n.undoManager.add(),n.nodeChanged(),!1}}),n.onInit.add(function(){var i=0,f=n.getParam("style_formats");f?r(f,function(t){var f,e=0;r(t,function(){e++});e>1?(f=t.name=t.name||"style_"+i++,n.formatter.register(f,t),u.add(t.title,f)):u.add(t.title)}):r(n.getParam("theme_advanced_styles","","hash"),function(r,f){var e;r&&(e="style_"+i++,n.formatter.register(e,{inline:"span",classes:r,selector:"*"}),u.add(t.editor.translate(f),e))})}),u.getLength()==0&&u.onPostRender.add(function(n,r){u.NativeListBox?i.add(r.id,"focus",t._importClasses,t):(i.add(r.id+"_text","focus",t._importClasses,t),i.add(r.id+"_text","mousedown",t._importClasses,t),i.add(r.id+"_open","focus",t._importClasses,t),i.add(r.id+"_open","mousedown",t._importClasses,t))}),u},_createFontSelect:function(){var n,i=this,t=i.editor;return n=t.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(i){var r=n.items[n.selectedIndex];if(!i&&r){t.execCommand("FontName",!1,r.value);return}return t.execCommand("FontName",!1,i),n.select(function(n){return i==n}),!1}}),n&&r(t.getParam("theme_advanced_fonts",i.settings.theme_advanced_fonts,"hash"),function(i,r){n.add(t.translate(r),i,{style:i.indexOf("dings")==-1?"font-family:"+i:""})}),n},_createFontSizeSelect:function(){var i=this,n=i.editor,t,u=0;return t=n.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(i){var r=t.items[t.selectedIndex];if(!i&&r){r=r.value;r["class"]?(n.formatter.toggle("fontsize_class",{value:r["class"]}),n.undoManager.add(),n.nodeChanged()):n.execCommand("FontSize",!1,r.fontSize);return}return i["class"]?(n.focus(),n.undoManager.add(),n.formatter.toggle("fontsize_class",{value:i["class"]}),n.undoManager.add(),n.nodeChanged()):n.execCommand("FontSize",!1,i.fontSize),t.select(function(n){return i==n}),!1}}),t&&r(i.settings.theme_advanced_font_sizes,function(n,r){var f=n.fontSize;f>=1&&f<=7&&(f=i.sizes[parseInt(f)-1]+"pt");t.add(r,n,{style:"font-size:"+f,"class":"mceFontSize"+u+++(" "+(n["class"]||""))})}),t},_createBlockFormats:function(){var n,i={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},t=this;return n=t.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"}),n&&r(t.editor.getParam("theme_advanced_blockformats",t.settings.theme_advanced_blockformats,"hash"),function(r,u){n.add(t.editor.translate(u!=r?u:i[r]),r,{"class":"mce_formatPreview mce_"+r})}),n},_createForeColorMenu:function(){var i,r=this,t=r.settings,n={},u;return t.theme_advanced_more_colors&&(n.more_colors_func=function(){r._mceColorPicker(0,{color:i.value,func:function(n){i.setColor(n)}})}),(u=t.theme_advanced_text_colors)&&(n.colors=u),t.theme_advanced_default_foreground_color&&(n.default_color=t.theme_advanced_default_foreground_color),n.title="advanced.forecolor_desc",n.cmd="ForeColor",n.scope=this,i=r.editor.controlManager.createColorSplitButton("forecolor",n)},_createBackColorMenu:function(){var i,r=this,t=r.settings,n={},u;return t.theme_advanced_more_colors&&(n.more_colors_func=function(){r._mceColorPicker(0,{color:i.value,func:function(n){i.setColor(n)}})}),(u=t.theme_advanced_background_colors)&&(n.colors=u),t.theme_advanced_default_background_color&&(n.default_color=t.theme_advanced_default_background_color),n.title="advanced.backcolor_desc",n.cmd="HiliteColor",n.scope=this,i=r.editor.controlManager.createColorSplitButton("backcolor",n)},renderUI:function(n){var u,c,h,o=this,f=o.editor,e=o.settings,l,s,a;u=s=t.create("span",{id:f.id+"_parent","class":"mceEditor "+f.settings.skin+"Skin"+(e.skin_variant?" "+f.settings.skin+"Skin"+o._ufirst(e.skin_variant):"")});t.boxModel||(u=t.add(u,"div",{"class":"mceOldBoxModel"}));u=l=t.add(u,"table",{id:f.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});u=h=t.add(u,"tbody");switch((e.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":c=o._rowLayout(e,h,n);break;case"customlayout":c=f.execCallback("theme_advanced_custom_layout",e,h,n,s);break;default:c=o._simpleLayout(e,h,n,s)}return u=n.targetNode,a=t.stdMode?l.getElementsByTagName("tr"):l.rows,t.addClass(a[0],"mceFirst"),t.addClass(a[a.length-1],"mceLast"),r(t.select("tr",h),function(n){t.addClass(n.firstChild,"mceFirst");t.addClass(n.childNodes[n.childNodes.length-1],"mceLast")}),t.get(e.theme_advanced_toolbar_container)?t.get(e.theme_advanced_toolbar_container).appendChild(s):t.insertAfter(s,u),i.add(f.id+"_path_row","click",function(n){return n=n.target,n.nodeName=="A"?(o._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1")),i.cancel(n)):void 0}),f.getParam("accessibility_focus")||i.add(t.add(s,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(f.id).focus()}),e.theme_advanced_toolbar_location=="external"&&(n.deltaHeight=0),o.deltaHeight=n.deltaHeight,n.targetNode=null,{iframeContainer:c,editorContainer:f.id+"_parent",sizeContainer:l,deltaHeight:n.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:n.majorVersion+"."+n.minorVersion}},resizeBy:function(n,i){var r=t.get(this.editor.id+"_tbl");this.resizeTo(r.clientWidth+n,r.clientHeight+i)},resizeTo:function(n,i){var e=this.editor,r=this.settings,u=t.get(e.id+"_tbl"),f=t.get(e.id+"_ifr");n=Math.max(r.theme_advanced_resizing_min_width||100,n);i=Math.max(r.theme_advanced_resizing_min_height||100,i);n=Math.min(r.theme_advanced_resizing_max_width||65535,n);i=Math.min(r.theme_advanced_resizing_max_height||65535,i);t.setStyle(u,"height","");t.setStyle(f,"height",i);r.theme_advanced_resize_horizontal&&(t.setStyle(u,"width",""),t.setStyle(f,"width",n),n<u.clientWidth&&t.setStyle(f,"width",u.clientWidth))},destroy:function(){var n=this.editor.id;i.clear(n+"_resize");i.clear(n+"_path_row");i.clear(n+"_external_close")},_simpleLayout:function(n,r,u,f){var h=this,s=h.editor,l=n.theme_advanced_toolbar_location,v=n.theme_advanced_statusbar_location,o,c,y,a;return n.readonly?(o=t.add(r,"tr"),o=c=t.add(o,"td",{"class":"mceIframeContainer"}),c):(l=="top"&&h._addToolbars(r,u),l=="external"&&(o=a=t.create("div",{style:"position:relative"}),o=t.add(o,"div",{id:s.id+"_external","class":"mceExternalToolbar"}),t.add(o,"a",{id:s.id+"_external_close",href:"javascript:;","class":"mceExternalClose"}),o=t.add(o,"table",{id:s.id+"_tblext",cellSpacing:0,cellPadding:0}),y=t.add(o,"tbody"),f.firstChild.className=="mceOldBoxModel"?f.firstChild.appendChild(a):f.insertBefore(a,f.firstChild),h._addToolbars(y,u),s.onMouseUp.add(function(){var n=t.get(s.id+"_external"),r;t.show(n);t.hide(e);r=i.add(s.id+"_external_close","click",function(){t.hide(s.id+"_external");i.remove(s.id+"_external_close","click",r)});t.show(n);t.setStyle(n,"top",-1-t.getRect(s.id+"_tblext").h);t.hide(n);t.show(n);n.style.filter="";e=s.id+"_external";n=null})),v=="top"&&h._addStatusBar(r,u),n.theme_advanced_toolbar_container||(o=t.add(r,"tr"),o=c=t.add(o,"td",{"class":"mceIframeContainer"})),l=="bottom"&&h._addToolbars(r,u),v=="bottom"&&h._addStatusBar(r,u),c)},_rowLayout:function(n,i,f){var o=this,v=o.editor,l,h,y=v.controlManager,e,a,c,s;return l=n.theme_advanced_containers_default_class||"",h=n.theme_advanced_containers_default_align||"center",r(u(n.theme_advanced_containers||""),function(r,u){var v=n["theme_advanced_container_"+r]||"";switch(v.toLowerCase()){case"mceeditor":e=t.add(i,"tr");e=a=t.add(e,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":o._addStatusBar(i,f);break;default:s=(n["theme_advanced_container_"+r+"_align"]||h).toLowerCase();s="mce"+o._ufirst(s);e=t.add(t.add(i,"tr"),"td",{"class":"mceToolbar "+(n["theme_advanced_container_"+r+"_class"]||l)+" "+s||h});c=y.createToolbar("toolbar"+u);o._addControls(v,c);t.setHTML(e,c.renderHTML());f.deltaHeight-=n.theme_advanced_row_height}}),a},_addControls:function(n,t){var i=this,e=i.settings,f,o=i.editor.controlManager;e.theme_advanced_disable&&!i._disabled?(f={},r(u(e.theme_advanced_disable),function(n){f[n]=1}),i._disabled=f):f=i._disabled;r(u(n),function(n){var u;if(!f||!f[n]){if(n=="tablecontrols"){r(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(n){n=i.createControl(n,o);n&&t.add(n)});return}u=i.createControl(n,o);u&&t.add(u)}})},_addToolbars:function(n,i){var s=this,r,c,f=s.editor,u=s.settings,e,a=f.controlManager,l,o=[],h;for(h=u.theme_advanced_toolbar_align.toLowerCase(),h="mce"+s._ufirst(h),l=t.add(t.add(n,"tr"),"td",{"class":"mceToolbar "+h}),f.getParam("accessibility_focus")||o.push(t.createHTML("a",{href:"#",onfocus:"tinyMCE.get('"+f.id+"').focus();"},"<!-- IE -->")),o.push(t.createHTML("a",{href:"#",accesskey:"q",title:f.getLang("advanced.toolbar_focus")},"<!-- IE -->")),r=1;e=u["theme_advanced_buttons"+r];r++)c=a.createToolbar("toolbar"+r,{"class":"mceToolbarRow"+r}),u["theme_advanced_buttons"+r+"_add"]&&(e+=","+u["theme_advanced_buttons"+r+"_add"]),u["theme_advanced_buttons"+r+"_add_before"]&&(e=u["theme_advanced_buttons"+r+"_add_before"]+","+e),s._addControls(e,c),o.push(c.renderHTML()),i.deltaHeight-=u.theme_advanced_row_height;o.push(t.createHTML("a",{href:"#",accesskey:"z",title:f.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+f.id+"').focus();"},"<!-- IE -->"));t.setHTML(l,o.join(""))},_addStatusBar:function(n,r){var e,o=this,u=o.editor,s=o.settings,h;e=t.add(n,"tr");e=h=t.add(e,"td",{"class":"mceStatusbar"});e=t.add(e,"div",{id:u.id+"_path_row"},s.theme_advanced_path?u.translate("advanced.path")+": ":"&#160;");t.add(e,"a",{href:"#",accesskey:"x"});s.theme_advanced_resizing&&(t.add(h,"a",{id:u.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize"}),s.theme_advanced_resizing_use_cookie&&u.onPostRender.add(function(){var n=f.getHash("TinyMCE_"+u.id+"_size"),i=t.get(u.id+"_tbl");n&&o.resizeTo(n.cw,n.ch)}),u.onPostRender.add(function(){i.add(u.id+"_resize","mousedown",function(n){function k(n){r=w+(n.screenX-y);e=b+(n.screenY-p);o.resizeTo(r,e)}function d(){i.remove(t.doc,"mousemove",c);i.remove(u.getDoc(),"mousemove",l);i.remove(t.doc,"mouseup",a);i.remove(u.getDoc(),"mouseup",v);s.theme_advanced_resizing_use_cookie&&f.setHash("TinyMCE_"+u.id+"_size",{cw:r,ch:e})}var c,l,a,v,y,p,w,b,r,e,h;n.preventDefault();y=n.screenX;p=n.screenY;h=t.get(o.editor.id+"_ifr");w=r=h.clientWidth;b=e=h.clientHeight;c=i.add(t.doc,"mousemove",k);l=i.add(u.getDoc(),"mousemove",k);a=i.add(t.doc,"mouseup",d);v=i.add(u.getDoc(),"mouseup",d)})}));r.deltaHeight-=21;e=n=null},_nodeChanged:function(i,u,f,e,o){function v(n){var t,i=o.parents,r=n;for(typeof n=="string"&&(r=function(t){return t.nodeName==n}),t=0;t<i.length;t++)if(r(i[t]))return i[t]}var l=this,h,d=0,s,c,p=l.settings,y,a,w,b,k;n.each(l.stateControls,function(n){u.setActive(n,i.queryCommandState(l.controls[n][1]))});u.setActive("visualaid",i.hasVisual);u.setDisabled("undo",!i.undoManager.hasUndo()&&!i.typing);u.setDisabled("redo",!i.undoManager.hasRedo());u.setDisabled("outdent",!i.queryCommandState("Outdent"));h=v("A");(c=u.get("link"))&&(h&&h.name||(c.setDisabled(!h&&e),c.setActive(!!h)));(c=u.get("unlink"))&&(c.setDisabled(!h&&e),c.setActive(!!h&&!h.name));(c=u.get("anchor"))&&c.setActive(!!h&&h.name);h=v("IMG");(c=u.get("image"))&&c.setActive(!!h&&f.className.indexOf("mceItem")==-1);(c=u.get("styleselect"))&&(l._importClasses(),b=[],r(c.items,function(n){b.push(n.value)}),k=i.formatter.matchAll(b),c.select(k[0]));(c=u.get("formatselect"))&&(h=v(t.isBlock),h&&c.select(h.nodeName.toLowerCase()));v(function(n){return n.nodeName==="SPAN"&&(!y&&n.className&&(y=n.className),!a&&n.style.fontSize&&(a=n.style.fontSize),!w&&n.style.fontFamily&&(w=n.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase())),!1});(c=u.get("fontselect"))&&c.select(function(n){return n.replace(/^([^,]+).*/,"$1").toLowerCase()==w});(c=u.get("fontsizeselect"))&&(!p.theme_advanced_runtime_fontsize||a||y||(a=i.dom.getStyle(f,"fontSize",!0)),c.select(function(n){return n.fontSize&&n.fontSize===a?!0:n["class"]&&n["class"]===y?!0:void 0}));p.theme_advanced_path&&p.theme_advanced_statusbar_location&&(h=t.get(i.id+"_path")||t.add(i.id+"_path_row","span",{id:i.id+"_path"}),t.setHTML(h,""),v(function(i){var r=i.nodeName.toLowerCase(),f,u="";if(i.nodeType==1&&i.nodeName!=="BR"&&!t.hasClass(i,"mceItemHidden")&&!t.hasClass(i,"mceItemRemoved")){(s=t.getAttrib(i,"mce_name"))&&(r=s);n.isIE&&i.scopeName!=="HTML"&&(r=i.scopeName+":"+r);r=r.replace(/mce\:/g,"");switch(r){case"b":r="strong";break;case"i":r="em";break;case"img":(s=t.getAttrib(i,"src"))&&(u+="src: "+s+" ");break;case"a":(s=t.getAttrib(i,"name"))&&(u+="name: "+s+" ",r+="#"+s);(s=t.getAttrib(i,"href"))&&(u+="href: "+s+" ");break;case"font":(s=t.getAttrib(i,"face"))&&(u+="font: "+s+" ");(s=t.getAttrib(i,"size"))&&(u+="size: "+s+" ");(s=t.getAttrib(i,"color"))&&(u+="color: "+s+" ");break;case"span":(s=t.getAttrib(i,"style"))&&(u+="style: "+s+" ")}(s=t.getAttrib(i,"id"))&&(u+="id: "+s+" ");(s=i.className)&&(s=s.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,""),s&&(u+="class: "+s+" ",(t.isBlock(i)||r=="img"||r=="span")&&(r+="."+s)));r=r.replace(/(html:)/g,"");r={name:r,node:i,title:u};l.onResolveName.dispatch(l,r);u=r.title;r=r.name;f=t.create("a",{href:"javascript:;",onmousedown:"return false;",title:u,"class":"mcePath_"+d++},r);h.hasChildNodes()?(h.insertBefore(t.doc.createTextNode(" » "),h.firstChild),h.insertBefore(f,h.firstChild)):h.appendChild(f)}},i.getBody()))},_sel:function(n){this.editor.execCommand("mceSelectNodeDepth",!1,n)},_mceInsertAnchor:function(){var n=this.editor;n.windowManager.open({url:this.url+"/anchor.htm",width:320+parseInt(n.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(n.getLang("advanced.anchor_delta_height",0)),inline:!0},{theme_url:this.url})},_mceCharMap:function(){var n=this.editor;n.windowManager.open({url:this.url+"/charmap.htm",width:550+parseInt(n.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(n.getLang("advanced.charmap_delta_height",0)),inline:!0},{theme_url:this.url})},_mceHelp:function(){var n=this.editor;n.windowManager.open({url:this.url+"/about.htm",width:480,height:380,inline:!0},{theme_url:this.url})},_mceColorPicker:function(n,t){var i=this.editor;t=t||{};i.windowManager.open({url:this.url+"/color_picker.htm",width:375+parseInt(i.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(i.getLang("advanced.colorpicker_delta_height",0)),close_previous:!1,inline:!0},{input_color:t.color,func:t.func,theme_url:this.url})},_mceCodeEditor:function(){var n=this.editor;n.windowManager.open({url:this.url+"/source_editor.htm",width:parseInt(n.getParam("theme_advanced_source_editor_width",720)),height:parseInt(n.getParam("theme_advanced_source_editor_height",580)),inline:!0,resizable:!0,maximizable:!0},{theme_url:this.url})},_mceImage:function(){var n=this.editor;n.dom.getAttrib(n.selection.getNode(),"class").indexOf("mceItem")==-1&&n.windowManager.open({url:this.url+"/image.htm",width:355+parseInt(n.getLang("advanced.image_delta_width",0)),height:375+parseInt(n.getLang("advanced.image_delta_height",0)),inline:!0},{theme_url:this.url})},_mceLink:function(){var n=this.editor;n.windowManager.open({url:this.url+"/link.htm",width:310+parseInt(n.getLang("advanced.link_delta_width",0)),height:200+parseInt(n.getLang("advanced.link_delta_height",0)),inline:!0},{theme_url:this.url})},_mceNewDocument:function(){var n=this.editor;n.windowManager.confirm("advanced.newdocument",function(t){t&&n.execCommand("mceSetContent",!1,"")})},_mceForeColor:function(){var n=this;this._mceColorPicker(0,{color:n.fgColor,func:function(t){n.fgColor=t;n.editor.execCommand("ForeColor",!1,t)}})},_mceBackColor:function(){var n=this;this._mceColorPicker(0,{color:n.bgColor,func:function(t){n.bgColor=t;n.editor.execCommand("HiliteColor",!1,t)}})},_ufirst:function(n){return n.substring(0,1).toUpperCase()+n.substring(1)}});n.ThemeManager.add("advanced",n.themes.AdvancedTheme)})(tinymce);