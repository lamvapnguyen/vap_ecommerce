(function(n){n.jqplot.EnhancedLegendRenderer=function(){n.jqplot.TableLegendRenderer.call(this)};n.jqplot.EnhancedLegendRenderer.prototype=new n.jqplot.TableLegendRenderer;n.jqplot.EnhancedLegendRenderer.prototype.constructor=n.jqplot.EnhancedLegendRenderer;n.jqplot.EnhancedLegendRenderer.prototype.init=function(t){this.numberRows=null;this.numberColumns=null;this.seriesToggle="normal";this.disableIEFading=!0;n.extend(!0,this,t);this.seriesToggle&&n.jqplot.postDrawHooks.push(postDraw)};n.jqplot.EnhancedLegendRenderer.prototype.draw=function(){var k=this,t,i,l,o,e,a,r,y,h,c,u,v,p,f,w,b;if(this.show){for(t=this._series,i="position:absolute;",i+=this.background?"background:"+this.background+";":"",i+=this.border?"border:"+this.border+";":"",i+=this.fontSize?"font-size:"+this.fontSize+";":"",i+=this.fontFamily?"font-family:"+this.fontFamily+";":"",i+=this.textColor?"color:"+this.textColor+";":"",i+=this.marginTop!=null?"margin-top:"+this.marginTop+";":"",i+=this.marginBottom!=null?"margin-bottom:"+this.marginBottom+";":"",i+=this.marginLeft!=null?"margin-left:"+this.marginLeft+";":"",i+=this.marginRight!=null?"margin-right:"+this.marginRight+";":"",this._elem=n('<table class="jqplot-table-legend" style="'+i+'"><\/table>'),this.seriesToggle&&this._elem.css("z-index","3"),l=!1,o=!1,this.numberRows?(e=this.numberRows,a=this.numberColumns?this.numberColumns:Math.ceil(t.length/e)):this.numberColumns?(a=this.numberColumns,e=Math.ceil(t.length/this.numberColumns)):(e=t.length,a=1),f=0,r=t.length-1;r>=0;r--)(t[r]._stack||t[r].renderer.constructor==n.jqplot.BezierCurveRenderer)&&(o=!0);for(r=0;r<e;r++)for(h=o?n('<tr class="jqplot-table-legend"><\/tr>').prependTo(this._elem):n('<tr class="jqplot-table-legend"><\/tr>').appendTo(this._elem),y=0;y<a;y++)f<t.length&&t[f].show&&t[f].showLabel&&(s=t[f],v=this.labels[f]||s.label.toString(),v&&(w=s.color,l=o?r==e-1?!1:!0:r>0?!0:!1,p=l?this.rowSpacing:"0",c=n('<td class="jqplot-table-legend" style="text-align:center;padding-top:'+p+';"><div><div class="jqplot-table-legend-swatch" style="background-color:'+w+";border-color:"+w+';"><\/div><\/div><\/td>'),u=n('<td class="jqplot-table-legend" style="padding-top:'+p+';"><\/td>'),this.escapeHtml?u.text(v):u.html(v),o?(this.showLabels&&u.prependTo(h),this.showSwatches&&c.prependTo(h)):(this.showSwatches&&c.appendTo(h),this.showLabels&&u.appendTo(h)),this.seriesToggle&&((typeof this.seriesToggle=="string"||typeof this.seriesToggle=="number")&&(n.browser.msie&&this.disableIEFading||(b=this.seriesToggle)),this.showSwatches&&(c.bind("click",{series:s,speed:b},s.toggleDisplay),c.addClass("jqplot-seriesToggle")),this.showLabels&&(u.bind("click",{series:s,speed:b},s.toggleDisplay),u.addClass("jqplot-seriesToggle"))),l=!0)),f++}return this._elem};postDraw=function(){if(this.legend.renderer.constructor==n.jqplot.EnhancedLegendRenderer&&this.legend.seriesToggle){var t=this.legend._elem.detach();this.eventCanvas._elem.after(t)}}})(jQuery);