(function(n){n.jqplot.PointLabels=function(t){this.show=n.jqplot.config.enablePlugins;this.location="n";this.labelsFromSeries=!1;this.seriesLabelIndex=null;this.labels=[];this._labels=[];this.stackedValue=!1;this.ypadding=6;this.xpadding=6;this.escapeHTML=!0;this.edgeTolerance=-5;this.formatter=n.jqplot.DefaultTickFormatter;this.formatString="";this.hideZeros=!1;this._elems=[];n.extend(!0,this,t)};var t={nw:0,n:1,ne:2,e:3,se:4,s:5,sw:6,w:7},i=["se","s","sw","w","nw","n","ne","e"];n.jqplot.PointLabels.init=function(t,i,r,u){var f=n.extend(!0,{},r,u);f.pointLabels=f.pointLabels||{};this.renderer.constructor!=n.jqplot.BarRenderer||this.barDirection!="horizontal"||f.pointLabels.location||(f.pointLabels.location="e");this.plugins.pointLabels=new n.jqplot.PointLabels(f.pointLabels);this.plugins.pointLabels.setLabels.call(this)};n.jqplot.PointLabels.prototype.setLabels=function(){var t=this.plugins.pointLabels,u,r,i;if(u=t.seriesLabelIndex!=null?t.seriesLabelIndex:this.renderer.constructor==n.jqplot.BarRenderer&&this.barDirection=="horizontal"?0:this._plotData[0].length-1,t._labels=[],t.labels.length==0||t.labelsFromSeries){if(t.stackedValue){if(this._plotData.length&&this._plotData[0].length)for(i=0;i<this._plotData.length;i++)t._labels.push(this._plotData[i][u])}else if(r=this.data,this.renderer.constructor==n.jqplot.BarRenderer&&this.waterfall&&(r=this._data),r.length&&r[0].length)for(i=0;i<r.length;i++)t._labels.push(r[i][u])}else t.labels.length&&(t._labels=t.labels)};n.jqplot.PointLabels.prototype.xOffset=function(n,t,i){t=t||this.location;i=i||this.xpadding;var r;switch(t){case"nw":r=-n.outerWidth(!0)-this.xpadding;break;case"n":r=-n.outerWidth(!0)/2;break;case"ne":r=this.xpadding;break;case"e":r=this.xpadding;break;case"se":r=this.xpadding;break;case"s":r=-n.outerWidth(!0)/2;break;case"sw":r=-n.outerWidth(!0)-this.xpadding;break;case"w":r=-n.outerWidth(!0)-this.xpadding;break;default:r=-n.outerWidth(!0)-this.xpadding}return r};n.jqplot.PointLabels.prototype.yOffset=function(n,t,i){t=t||this.location;i=i||this.xpadding;var r;switch(t){case"nw":r=-n.outerHeight(!0)-this.ypadding;break;case"n":r=-n.outerHeight(!0)-this.ypadding;break;case"ne":r=-n.outerHeight(!0)-this.ypadding;break;case"e":r=-n.outerHeight(!0)/2;break;case"se":r=this.ypadding;break;case"s":r=this.ypadding;break;case"sw":r=this.ypadding;break;case"w":r=-n.outerHeight(!0)/2;break;default:r=-n.outerHeight(!0)-this.ypadding}return r};n.jqplot.PointLabels.draw=function(r){var u=this.plugins.pointLabels,a,f,o,e,s,h,c;for(u.setLabels.call(this),f=0;f<u._elems.length;f++)u._elems[f].remove();if(u.show){a="_"+this._stackAxis+"axis";u.formatString||(u.formatString=this[a]._ticks[0].formatString,u.formatter=this[a]._ticks[0].formatter);var v=this._plotData,w=this._xaxis,b=this._yaxis;for(f=u._labels.length-1;f>=0;f--){o=u._labels[f];u.hideZeros&&parseInt(u._labels[f],10)==0&&(o="");o!=null&&(o=u.formatter(u.formatString,o));e=n('<div class="jqplot-point-label jqplot-series-'+this.index+" jqplot-point-"+f+'" style="position:absolute"><\/div>');e.insertAfter(r.canvas);u._elems.push(e);u.escapeHTML?e.text(o):e.html(o);s=u.location;this.waterfall&&parseInt(o,10)<0&&(s=i[t[s]]);h=w.u2p(v[f][0])+u.xOffset(e,s);c=b.u2p(v[f][1])+u.yOffset(e,s);this.renderer.constructor==n.jqplot.BarRenderer&&(this.barDirection=="vertical"?h+=this._barNudge:c-=this._barNudge);e.css("left",h);e.css("top",c);var k=h+n(e).width(),d=c+n(e).height(),l=u.edgeTolerance,y=n(r.canvas).position().left,p=n(r.canvas).position().top,g=r.canvas.width+y,nt=r.canvas.height+p;(h-l<y||c-l<p||k+l>g||d+l>nt)&&n(e).detach()}}};n.jqplot.postSeriesInitHooks.push(n.jqplot.PointLabels.init);n.jqplot.postDrawSeriesHooks.push(n.jqplot.PointLabels.draw)})(jQuery);