(function(n){function t(t,i,r){var e=r.plugins.cursor,h="",c=!1,o,f,l;if(e.showTooltipGridPosition&&(h=t.x+", "+t.y,c=!0),e.showTooltipUnitPosition)for(f=0;f<e.tooltipAxisGroups.length;f++){if(o=e.tooltipAxisGroups[f],c&&(h+="<br />"),e.useAxesFormatters){var y=r.axes[o[0]]._ticks[0].formatter,p=r.axes[o[1]]._ticks[0].formatter,w=r.axes[o[0]]._ticks[0].formatString,b=r.axes[o[1]]._ticks[0].formatString;h+=y(w,i[o[0]])+", "+p(b,i[o[1]])}else h+=n.jqplot.sprintf(e.tooltipFormatString,i[o[0]],i[o[1]]);c=!0}if(e.showTooltipDataPosition){var s=r.series,k=u(r,t.x,t.y),c=!1;for(f=0;f<s.length;f++)if(s[f].show){var g=s[f].index,nt=s[f].label.toString(),d=n.inArray(g,k.indices),a=undefined,v=undefined;if(d!=-1){if(l=k.data[d].data,e.useAxesFormatters){var y=s[f]._xaxis._ticks[0].formatter,p=s[f]._yaxis._ticks[0].formatter,w=s[f]._xaxis._ticks[0].formatString,b=s[f]._yaxis._ticks[0].formatString;a=y(w,l[0]);v=p(b,l[1])}else a=l[0],v=l[1];c&&(h+="<br />");h+=n.jqplot.sprintf(e.tooltipFormatString,nt,a,v);c=!0}}}e._tooltipElem.html(h)}function r(t,i){var r=i.plugins.cursor,f=r.cursorCanvas._ctx,a,o,e,h;if(f.clearRect(0,0,f.canvas.width,f.canvas.height),r.showVerticalLine&&r.shapeRenderer.draw(f,[[t.x,0],[t.x,f.canvas.height]]),r.showHorizontalLine&&r.shapeRenderer.draw(f,[[0,t.y],[f.canvas.width,t.y]]),a=u(i,t.x,t.y),r.showCursorLegend)for(o=n(i.targetId+" td.jqplot-cursor-legend-label"),e=0;e<o.length;e++){var v=n(o[e]).data("seriesIndex"),s=i.series[v],y=s.label.toString(),p=n.inArray(v,a.indices),c=undefined,l=undefined;if(p!=-1)if(h=a.data[p].data,r.useAxesFormatters){var w=s._xaxis._ticks[0].formatter,b=s._yaxis._ticks[0].formatter,k=s._xaxis._ticks[0].formatString,d=s._yaxis._ticks[0].formatString;c=w(k,h[0]);l=b(d,h[1])}else c=h[0],l=h[1];i.legend.escapeHtml?n(o[e]).text(n.jqplot.sprintf(r.cursorLegendFormatString,y,c,l)):n(o[e]).html(n.jqplot.sprintf(r.cursorLegendFormatString,y,c,l))}}function u(n,t){for(var r,f={indices:[],data:[]},i,s,e,o=n.plugins.cursor,u=0;u<n.series.length;u++)if(i=n.series[u],s=i.renderer,i.show)for(e=o.intersectionThreshold,i.showMarker&&(e+=i.markerRenderer.size/2),r=0;r<i.gridData.length;r++)p=i.gridData[r],o.showVerticalLine&&Math.abs(t-p[0])<=e&&(f.indices.push(u),f.data.push({seriesIndex:u,pointIndex:r,gridData:p,data:i.data[r]}));return f}function i(n,t){var i=t.plugins.cursor,r=i._tooltipElem,u,f;switch(i.tooltipLocation){case"nw":u=n.x+t._gridPadding.left-r.outerWidth(!0)-i.tooltipOffset;f=n.y+t._gridPadding.top-i.tooltipOffset-r.outerHeight(!0);break;case"n":u=n.x+t._gridPadding.left-r.outerWidth(!0)/2;f=n.y+t._gridPadding.top-i.tooltipOffset-r.outerHeight(!0);break;case"ne":u=n.x+t._gridPadding.left+i.tooltipOffset;f=n.y+t._gridPadding.top-i.tooltipOffset-r.outerHeight(!0);break;case"e":u=n.x+t._gridPadding.left+i.tooltipOffset;f=n.y+t._gridPadding.top-r.outerHeight(!0)/2;break;case"se":u=n.x+t._gridPadding.left+i.tooltipOffset;f=n.y+t._gridPadding.top+i.tooltipOffset;break;case"s":u=n.x+t._gridPadding.left-r.outerWidth(!0)/2;f=n.y+t._gridPadding.top+i.tooltipOffset;break;case"sw":u=n.x+t._gridPadding.left-r.outerWidth(!0)-i.tooltipOffset;f=n.y+t._gridPadding.top+i.tooltipOffset;break;case"w":u=n.x+t._gridPadding.left-r.outerWidth(!0)-i.tooltipOffset;f=n.y+t._gridPadding.top-r.outerHeight(!0)/2;break;default:u=n.x+t._gridPadding.left+i.tooltipOffset;f=n.y+t._gridPadding.top+i.tooltipOffset}i._tooltipElem.css("left",u);i._tooltipElem.css("top",f)}function e(n){var t=n._gridPadding,u=n.plugins.cursor,f=u._tooltipElem,i,r;switch(u.tooltipLocation){case"nw":i=t.left+u.tooltipOffset;r=t.top+u.tooltipOffset;f.css("left",i);f.css("top",r);break;case"n":i=(t.left+(n._plotDimensions.width-t.right))/2-f.outerWidth(!0)/2;r=t.top+u.tooltipOffset;f.css("left",i);f.css("top",r);break;case"ne":i=t.right+u.tooltipOffset;r=t.top+u.tooltipOffset;f.css({right:i,top:r});break;case"e":i=t.right+u.tooltipOffset;r=(t.top+(n._plotDimensions.height-t.bottom))/2-f.outerHeight(!0)/2;f.css({right:i,top:r});break;case"se":i=t.right+u.tooltipOffset;r=t.bottom+u.tooltipOffset;f.css({right:i,bottom:r});break;case"s":i=(t.left+(n._plotDimensions.width-t.right))/2-f.outerWidth(!0)/2;r=t.bottom+u.tooltipOffset;f.css({left:i,bottom:r});break;case"sw":i=t.left+u.tooltipOffset;r=t.bottom+u.tooltipOffset;f.css({left:i,bottom:r});break;case"w":i=t.left+u.tooltipOffset;r=(t.top+(n._plotDimensions.height-t.bottom))/2-f.outerHeight(!0)/2;f.css({left:i,top:r});break;default:i=t.right-u.tooltipOffset;r=t.bottom+u.tooltipOffset;f.css({right:i,bottom:r})}}function o(n,t,i,r,u){var f,e;return n.preventDefault(),n.stopImmediatePropagation(),f=u.plugins.cursor,f.clickReset&&f.resetZoom(u,f),e=window.getSelection,document.selection&&document.selection.empty?document.selection.empty():e&&!e().isCollapsed&&e().collapse(),!1}function h(n,t,i,r,u){var f,e;return n.preventDefault(),n.stopImmediatePropagation(),f=u.plugins.cursor,f.dblClickReset&&f.resetZoom(u,f),e=window.getSelection,document.selection&&document.selection.empty?document.selection.empty():e&&!e().isCollapsed&&e().collapse(),!1}function c(t,i,r,u,f){var e=f.plugins.cursor,h,s,o;if(e.onGrid=!1,e.show&&(n(t.target).css("cursor",e.previousCursor),!e.showTooltip||e._zoom.zooming&&e.showTooltipOutsideZoom&&!e.constrainOutsideZoom||e._tooltipElem.hide(),e.zoom&&(e._zoom.gridpos=i,e._zoom.datapos=r),(e.showVerticalLine||e.showHorizontalLine)&&(h=e.cursorCanvas._ctx,h.clearRect(0,0,h.canvas.width,h.canvas.height)),e.showCursorLegend))for(s=n(f.targetId+" td.jqplot-cursor-legend-label"),o=0;o<s.length;o++){var l=n(s[o]).data("seriesIndex"),a=f.series[l],c=a.label.toString();f.legend.escapeHtml?n(s[o]).text(n.jqplot.sprintf(e.cursorLegendFormatString,c,undefined,undefined)):n(s[o]).html(n.jqplot.sprintf(e.cursorLegendFormatString,c,undefined,undefined))}}function l(n,u,f,o,s){var h=s.plugins.cursor;h.onGrid=!0;h.show&&(h.previousCursor=n.target.style.cursor,n.target.style.cursor=h.style,h.showTooltip&&(t(u,f,s),h.followMouse?i(u,s):e(s),h._tooltipElem.show()),(h.showVerticalLine||h.showHorizontalLine)&&r(u,s))}function a(n,u,f,e,o){var s=o.plugins.cursor,h=s.zoomCanvas._ctx;s.show&&(s.showTooltip&&(t(u,f,o),s.followMouse&&i(u,o)),(s.showVerticalLine||s.showHorizontalLine)&&r(u,o))}function v(n){for(var u=n.data.plot,r=u.eventCanvas._elem.offset(),f={x:n.pageX-r.left,y:n.pageY-r.top},e={xaxis:null,yaxis:null,x2axis:null,y2axis:null,y3axis:null,y4axis:null,y5axis:null,y6axis:null,y7axis:null,y8axis:null,y9axis:null},s=["xaxis","yaxis","x2axis","y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis"],o=u.axes,t,i=11;i>0;i--)t=s[i-1],o[t].show&&(e[t]=o[t].series_p2u(f[t.charAt(0)]));return{offsets:r,gridPos:f,dataPos:e}}function f(n){var e=n.data.plot,r=e.plugins.cursor,f;if(r.show&&r.zoom&&r._zoom.started&&!r.zoomTarget){var o=r.zoomCanvas._ctx,s=v(n),u=s.gridPos,h=s.dataPos;r._zoom.gridpos=u;r._zoom.datapos=h;r._zoom.zooming=!0;var c=u.x,l=u.y,a=o.canvas.height,y=o.canvas.width;r.showTooltip&&!r.onGrid&&r.showTooltipOutsideZoom&&(t(u,h,e),r.followMouse&&i(u,e));r._zoom.end=r.constrainZoomTo=="x"?[c,a]:r.constrainZoomTo=="y"?[y,l]:[c,l];f=window.getSelection;document.selection&&document.selection.empty?document.selection.empty():f&&!f().isCollapsed&&f().collapse();b.call(r)}}function y(t,i,r,u,e){var o=e.plugins.cursor,c,s,h;n(document).one("mouseup.jqplot_cursor",{plot:e},w);if(c=e.axes,document.onselectstart!=undefined&&(o._oldHandlers.onselectstart=document.onselectstart,document.onselectstart=function(){return!1}),document.ondrag!=undefined&&(o._oldHandlers.ondrag=document.ondrag,document.ondrag=function(){return!1}),document.onmousedown!=undefined&&(o._oldHandlers.onmousedown=document.onmousedown,document.onmousedown=function(){return!1}),o.zoom){o.zoomProxy||(s=o.zoomCanvas._ctx,s.clearRect(0,0,s.canvas.width,s.canvas.height));o._zoom.start=o.constrainZoomTo=="x"?[i.x,0]:o.constrainZoomTo=="y"?[0,i.y]:[i.x,i.y];o._zoom.started=!0;for(h in r)o._zoom.axes.start[h]=r[h];n(document).bind("mousemove.jqplotCursor",{plot:e},f)}}function w(t){var s=t.data.plot,i=s.plugins.cursor,e;if(i.zoom&&i._zoom.zooming&&!i.zoomTarget){var r=i._zoom.gridpos.x,u=i._zoom.gridpos.y,o=i._zoom.datapos,h=i.zoomCanvas._ctx.canvas.height,c=i.zoomCanvas._ctx.canvas.width,l=s.axes;if(i.constrainOutsideZoom&&!i.onGrid){r<0?r=0:r>c&&(r=c);u<0?u=0:u>h&&(u=h);for(e in o)o[e]&&(o[e]=e.charAt(0)=="x"?l[e].series_p2u(r):l[e].series_p2u(u))}i.constrainZoomTo=="x"?u=h:i.constrainZoomTo=="y"&&(r=c);i._zoom.end=[r,u];i._zoom.gridpos={x:r,y:u};i.doZoom(i._zoom.gridpos,o,s,i)}i._zoom.started=!1;i._zoom.zooming=!1;n(document).unbind("mousemove.jqplotCursor",f);document.onselectstart!=undefined&&i._oldHandlers.onselectstart!=null&&(document.onselectstart=i._oldHandlers.onselectstart,i._oldHandlers.onselectstart=null);document.ondrag!=undefined&&i._oldHandlers.ondrag!=null&&(document.ondrag=i._oldHandlers.ondrag,i._oldHandlers.ondrag=null);document.onmousedown!=undefined&&i._oldHandlers.onmousedown!=null&&(document.onmousedown=i._oldHandlers.onmousedown,i._oldHandlers.onmousedown=null)}function b(){var t=this._zoom.start,i=this._zoom.end,n=this.zoomCanvas._ctx,r,u,f,e;i[0]>t[0]?(r=t[0],e=i[0]-t[0]):(r=i[0],e=t[0]-i[0]);i[1]>t[1]?(u=t[1],f=i[1]-t[1]):(u=i[1],f=t[1]-i[1]);n.fillStyle="rgba(0,0,0,0.2)";n.strokeStyle="#999999";n.lineWidth=1;n.clearRect(0,0,n.canvas.width,n.canvas.height);n.fillRect(0,0,n.canvas.width,n.canvas.height);n.clearRect(r,u,e,f);n.strokeRect(r,u,e,f)}n.jqplot.Cursor=function(t){this.style="crosshair";this.previousCursor="auto";this.show=n.jqplot.config.enablePlugins;this.showTooltip=!0;this.followMouse=!1;this.tooltipLocation="se";this.tooltipOffset=6;this.showTooltipGridPosition=!1;this.showTooltipUnitPosition=!0;this.showTooltipDataPosition=!1;this.tooltipFormatString="%.4P, %.4P";this.useAxesFormatters=!0;this.tooltipAxisGroups=[];this.zoom=!1;this.zoomProxy=!1;this.zoomTarget=!1;this.clickReset=!1;this.dblClickReset=!0;this.showVerticalLine=!1;this.showHorizontalLine=!1;this.constrainZoomTo="none";this.shapeRenderer=new n.jqplot.ShapeRenderer;this._zoom={start:[],end:[],started:!1,zooming:!1,isZoomed:!1,axes:{start:{},end:{}},gridpos:{},datapos:{}};this._tooltipElem;this.zoomCanvas;this.cursorCanvas;this.intersectionThreshold=2;this.showCursorLegend=!1;this.cursorLegendFormatString=n.jqplot.Cursor.cursorLegendFormatString;this._oldHandlers={onselectstart:null,ondrag:null,onmousedown:null};this.constrainOutsideZoom=!0;this.showTooltipOutsideZoom=!1;this.onGrid=!1;n.extend(!0,this,t)};n.jqplot.Cursor.cursorLegendFormatString="%s x:%s, y:%s";n.jqplot.Cursor.init=function(t,i,r){var f=r||{},u;this.plugins.cursor=new n.jqplot.Cursor(f.cursor);u=this.plugins.cursor;u.show&&(n.jqplot.eventListenerHooks.push(["jqplotMouseEnter",l]),n.jqplot.eventListenerHooks.push(["jqplotMouseLeave",c]),n.jqplot.eventListenerHooks.push(["jqplotMouseMove",a]),u.showCursorLegend&&(r.legend=r.legend||{},r.legend.renderer=n.jqplot.CursorLegendRenderer,r.legend.formatString=this.plugins.cursor.cursorLegendFormatString,r.legend.show=!0),u.zoom&&(n.jqplot.eventListenerHooks.push(["jqplotMouseDown",y]),u.clickReset&&n.jqplot.eventListenerHooks.push(["jqplotClick",o]),u.dblClickReset&&n.jqplot.eventListenerHooks.push(["jqplotDblClick",h])),this.resetZoom=function(){var t=this.axes,i,n;if(u.zoomProxy)n=this.plugins.cursor.zoomCanvas._ctx,n.clearRect(0,0,n.canvas.width,n.canvas.height);else{for(i in t)t[i].reset();this.redraw()}this.plugins.cursor._zoom.isZoomed=!1;this.target.trigger("jqplotResetZoom",[this,this.plugins.cursor])},u.showTooltipDataPosition&&(u.showTooltipUnitPosition=!1,u.showTooltipGridPosition=!1,f.cursor.tooltipFormatString==undefined&&(u.tooltipFormatString=n.jqplot.Cursor.cursorLegendFormatString)))};n.jqplot.Cursor.postDraw=function(){var t=this.plugins.cursor,o,u,f,r,e,i;if(t.zoomCanvas=new n.jqplot.GenericCanvas,this.eventCanvas._elem.before(t.zoomCanvas.createElement(this._gridPadding,"jqplot-zoom-canvas",this._plotDimensions)),o=t.zoomCanvas.setContext(),t._tooltipElem=n('<div class="jqplot-cursor-tooltip" style="position:absolute;display:none"><\/div>'),t.zoomCanvas._elem.before(t._tooltipElem),(t.showVerticalLine||t.showHorizontalLine)&&(t.cursorCanvas=new n.jqplot.GenericCanvas,this.eventCanvas._elem.before(t.cursorCanvas.createElement(this._gridPadding,"jqplot-cursor-canvas",this._plotDimensions)),o=t.cursorCanvas.setContext()),t.showTooltipUnitPosition&&t.tooltipAxisGroups.length===0){for(u=this.series,r=[],i=0;i<u.length;i++)f=u[i],e=f.xaxis+","+f.yaxis,n.inArray(e,r)==-1&&r.push(e);for(i=0;i<r.length;i++)t.tooltipAxisGroups.push(r[i].split(","))}};n.jqplot.Cursor.zoomProxy=function(n,t){function u(t,r,u,f,e){i.doZoom(r,u,n,e)}function f(){n.resetZoom()}var i=n.plugins.cursor,r=t.plugins.cursor;i.zoomTarget=!0;i.zoom=!0;i.style="auto";i.dblClickReset=!1;r.zoom=!0;r.zoomProxy=!0;t.target.bind("jqplotZoom",u);t.target.bind("jqplotResetZoom",f)};n.jqplot.Cursor.prototype.resetZoom=function(n,t){var r=n.axes,u=t._zoom.axes,i,f;if(!n.plugins.cursor.zoomProxy&&t._zoom.isZoomed){for(i in r)r[i]._ticks=[],r[i].min=u[i].min,r[i].max=u[i].max,r[i].numberTicks=u[i].numberTicks,r[i].tickInterval=u[i].tickInterval,r[i].daTickInterval=u[i].daTickInterval;n.redraw();t._zoom.isZoomed=!1}else f=t.zoomCanvas._ctx,f.clearRect(0,0,f.canvas.width,f.canvas.height);n.target.trigger("jqplotResetZoom",[n,t])};n.jqplot.Cursor.resetZoom=function(n){n.resetZoom()};n.jqplot.Cursor.prototype.doZoom=function(n,t,i,r){var f=r,e=i.axes,h=f._zoom.axes,o=h.start,c=h.end,s=i.plugins.cursor.zoomCanvas._ctx,u;if(f.constrainZoomTo=="none"&&Math.abs(n.x-f._zoom.start[0])>6&&Math.abs(n.y-f._zoom.start[1])>6||f.constrainZoomTo=="x"&&Math.abs(n.x-f._zoom.start[0])>6||f.constrainZoomTo=="y"&&Math.abs(n.y-f._zoom.start[1])>6){if(!i.plugins.cursor.zoomProxy){for(u in t)f._zoom.axes[u]==undefined&&(f._zoom.axes[u]={},f._zoom.axes[u].numberTicks=e[u].numberTicks,f._zoom.axes[u].tickInterval=e[u].tickInterval,f._zoom.axes[u].daTickInterval=e[u].daTickInterval,f._zoom.axes[u].min=e[u].min,f._zoom.axes[u].max=e[u].max),(f.constrainZoomTo=="none"||f.constrainZoomTo=="x"&&u.charAt(0)=="x"||f.constrainZoomTo=="y"&&u.charAt(0)=="y")&&(dp=t[u],dp!=null&&(dp>o[u]?(e[u].min=o[u],e[u].max=dp):(span=o[u]-dp,e[u].max=o[u],e[u].min=dp),e[u].tickInterval=null,e[u].daTickInterval=null,e[u]._ticks=[]));s.clearRect(0,0,s.canvas.width,s.canvas.height);i.redraw();f._zoom.isZoomed=!0}i.target.trigger("jqplotZoom",[n,t,i,r])}};n.jqplot.preInitHooks.push(n.jqplot.Cursor.init);n.jqplot.postDrawHooks.push(n.jqplot.Cursor.postDraw);n.jqplot.CursorLegendRenderer=function(t){n.jqplot.TableLegendRenderer.call(this,t);this.formatString="%s"};n.jqplot.CursorLegendRenderer.prototype=new n.jqplot.TableLegendRenderer;n.jqplot.CursorLegendRenderer.prototype.constructor=n.jqplot.CursorLegendRenderer;n.jqplot.CursorLegendRenderer.prototype.draw=function(){function h(t,i,r,u){var o=r?this.rowSpacing:"0",e=n('<tr class="jqplot-legend jqplot-cursor-legend"><\/tr>').appendTo(this._elem),f;e.data("seriesIndex",u);n('<td class="jqplot-legend jqplot-cursor-legend-swatch" style="padding-top:'+o+';"><div style="border:1px solid #cccccc;padding:0.2em;"><div class="jqplot-cursor-legend-swatch" style="background-color:'+i+';"><\/div><\/div><\/td>').appendTo(e);f=n('<td class="jqplot-legend jqplot-cursor-legend-label" style="vertical-align:middle;padding-top:'+o+';"><\/td>');f.appendTo(e);f.data("seriesIndex",u);this.escapeHtml?f.text(t):f.html(t)}var f,t,i,e,o,r,u;if(this.show)for(f=this._series,this._elem=n('<table class="jqplot-legend jqplot-cursor-legend" style="position:absolute"><\/table>'),t=!1,i=0;i<f.length;i++)if(s=f[i],s.show)for(e=n.jqplot.sprintf(this.formatString,s.label.toString()),e&&(o=s.color,s._stack&&!s.fill&&(o=""),h.call(this,e,o,t,i),t=!0),r=0;r<n.jqplot.addLegendRowHooks.length;r++)u=n.jqplot.addLegendRowHooks[r].call(this,s),u&&(h.call(this,u.label,u.color,t),t=!0);return this._elem}})(jQuery);