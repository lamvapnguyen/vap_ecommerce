(function(n){function u(){var i,r,t;if(this.rendererOptions.barDirection=="horizontal"&&(this._stackAxis="x",this._primaryAxis="_yaxis"),this.rendererOptions.waterfall==!0){for(this._data=n.extend(!0,[],this.data),i=0,r=!this.rendererOptions.barDirection||this.rendererOptions.barDirection=="vertical"?1:0,t=0;t<this.data.length;t++)i+=this.data[t][r],t>0&&(this.data[t][r]+=this.data[t-1][r]);this.data[this.data.length]=r==1?[this.data.length+1,i]:[i,this.data.length+1];this._data[this._data.length]=r==1?[this._data.length+1,i]:[i,this._data.length+1]}if(this.rendererOptions.groups>1){this.breakOnNull=!0;var u=this.data.length,f=parseInt(u/this.rendererOptions.groups,10),e=0;for(t=f;t<u;t+=f)this.data.splice(t+e,0,[null,null]),e++;for(t=0;t<this.data.length;t++)this._primaryAxis=="_xaxis"?this.data[t][0]=t+1:this.data[t][1]=t+1}}function f(t){for(var r,e=[],u=0;u<t.length;u++){var f=n.jqplot.getColorComponents(t[u]),i=[f[0],f[1],f[2]],o=i[0]+i[1]+i[2];for(r=0;r<3;r++)i[r]=o>570?i[r]*.8:i[r]+.3*(255-i[r]),i[r]=parseInt(i[r],10);e.push("rgb("+i[0]+","+i[1]+","+i[2]+")")}return e}function e(){for(i=0;i<this.series.length;i++)this.series[i].renderer.constructor==n.jqplot.BarRenderer&&this.series[i].highlightMouseOver&&(this.series[i].highlightMouseDown=!1);this.target.bind("mouseout",{plot:this},function(n){t(n.data.plot)})}function o(){this.plugins.barRenderer={highlightedSeriesIndex:null};this.plugins.barRenderer.highlightCanvas=new n.jqplot.GenericCanvas;this.eventCanvas._elem.before(this.plugins.barRenderer.highlightCanvas.createElement(this._gridPadding,"jqplot-barRenderer-highlight-canvas",this._plotDimensions));var t=this.plugins.barRenderer.highlightCanvas.setContext()}function r(n,t,i,r){var f=n.series[t],u=n.plugins.barRenderer.highlightCanvas,e;u._ctx.clearRect(0,0,u._ctx.canvas.width,u._ctx.canvas.height);f._highlightedPoint=i;n.plugins.barRenderer.highlightedSeriesIndex=t;e={fillStyle:f.highlightColors[i]};f.renderer.shapeRenderer.draw(u._ctx,r,e)}function t(n){var i=n.plugins.barRenderer.highlightCanvas,t;for(i._ctx.clearRect(0,0,i._ctx.canvas.width,i._ctx.canvas.height),t=0;t<n.series.length;t++)n.series[t]._highlightedPoint=null;n.plugins.barRenderer.highlightedSeriesIndex=null;n.target.trigger("jqplotDataUnhighlight")}function s(n,i,u,f,e){var o,s,h;f?(o=[f.seriesIndex,f.pointIndex,f.data],s=jQuery.Event("jqplotDataMouseOver"),s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),!e.series[o[0]].highlightMouseOver||o[0]==e.plugins.barRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(h=jQuery.Event("jqplotDataHighlight"),h.pageX=n.pageX,h.pageY=n.pageY,e.target.trigger(h,o),r(e,f.seriesIndex,f.pointIndex,f.points))):f==null&&t(e)}function h(n,i,u,f,e){var o,s;f?(o=[f.seriesIndex,f.pointIndex,f.data],!e.series[o[0]].highlightMouseDown||o[0]==e.plugins.barRenderer.highlightedSeriesIndex&&o[1]==e.series[o[0]]._highlightedPoint||(s=jQuery.Event("jqplotDataHighlight"),s.pageX=n.pageX,s.pageY=n.pageY,e.target.trigger(s,o),r(e,f.seriesIndex,f.pointIndex,f.points))):f==null&&t(e)}function c(n,i,r,u,f){var e=f.plugins.barRenderer.highlightedSeriesIndex;e!=null&&f.series[e].highlightMouseDown&&t(f)}function l(n,t,i,r,u){if(r){var e=[r.seriesIndex,r.pointIndex,r.data],f=jQuery.Event("jqplotDataClick");f.pageX=n.pageX;f.pageY=n.pageY;u.target.trigger(f,e)}}function a(n,i,r,u,f){var s,o,e;u&&(s=[u.seriesIndex,u.pointIndex,u.data],o=f.plugins.barRenderer.highlightedSeriesIndex,o!=null&&f.series[o].highlightMouseDown&&t(f),e=jQuery.Event("jqplotDataRightClick"),e.pageX=n.pageX,e.pageY=n.pageY,f.target.trigger(e,s))}n.jqplot.BarRenderer=function(){n.jqplot.LineRenderer.call(this)};n.jqplot.BarRenderer.prototype=new n.jqplot.LineRenderer;n.jqplot.BarRenderer.prototype.constructor=n.jqplot.BarRenderer;n.jqplot.BarRenderer.prototype.init=function(t,i){var r,u;this.barPadding=8;this.barMargin=10;this.barDirection="vertical";this.barWidth=null;this.shadowOffset=2;this.shadowDepth=5;this.shadowAlpha=.08;this.waterfall=!1;this.groups=1;this.varyBarColor=!1;this.highlightMouseOver=!0;this.highlightMouseDown=!1;this.highlightColors=[];t.highlightMouseDown&&t.highlightMouseOver==null&&(t.highlightMouseOver=!1);n.extend(!0,this,t);this.fill=!0;this.waterfall&&(this.fillToZero=!1,this.disableStack=!0);this.barDirection=="vertical"?(this._primaryAxis="_xaxis",this._stackAxis="y",this.fillAxis="y"):(this._primaryAxis="_yaxis",this._stackAxis="x",this.fillAxis="x");this._highlightedPoint=null;this._plotSeriesInfo=null;this._dataColors=[];this._barPoints=[];r={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,strokeStyle:this.color,fillStyle:this.color,closePath:this.fill};this.renderer.shapeRenderer.init(r);u={lineJoin:"miter",lineCap:"round",fill:!0,isarc:!1,angle:this.shadowAngle,offset:this.shadowOffset,alpha:this.shadowAlpha,depth:this.shadowDepth,closePath:this.fill};this.renderer.shadowRenderer.init(u);i.postInitHooks.addOnce(e);i.postDrawHooks.addOnce(o);i.eventListenerHooks.addOnce("jqplotMouseMove",s);i.eventListenerHooks.addOnce("jqplotMouseDown",h);i.eventListenerHooks.addOnce("jqplotMouseUp",c);i.eventListenerHooks.addOnce("jqplotClick",l);i.eventListenerHooks.addOnce("jqplotRightClick",a)};n.jqplot.preSeriesInitHooks.push(u);n.jqplot.BarRenderer.prototype.calcSeriesNumbers=function(){for(var r=0,u=0,f=this[this._primaryAxis],t,e,i=0;i<f._series.length;i++)t=f._series[i],t===this&&(e=i),t.renderer.constructor==n.jqplot.BarRenderer&&(r+=t.data.length,u+=1);return[r,u,e]};n.jqplot.BarRenderer.prototype.setBarWidth=function(){var i=0,t=0,n=this[this._primaryAxis],u=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),f,r;return i=u[0],t=u[1],f=n.numberTicks,r=(f-1)/2,this.barWidth=n.name=="xaxis"||n.name=="x2axis"?this._stack?(n._offsets.max-n._offsets.min)/i*t-this.barMargin:((n._offsets.max-n._offsets.min)/r-this.barPadding*(t-1)-this.barMargin*2)/t:this._stack?(n._offsets.min-n._offsets.max)/i*t-this.barMargin:((n._offsets.min-n._offsets.max)/r-this.barPadding*(t-1)-this.barMargin*2)/t,[i,t]};n.jqplot.BarRenderer.prototype.draw=function(t,i,r){var e=r!=undefined?r:{},w=e.shadow!=undefined?e.shadow:this.shadow,g=e.showLine!=undefined?e.showLine:this.showLine,tt=e.fill!=undefined?e.fill:this.fill,it=this.xaxis,rt=this.yaxis,ut=this._xaxis.series_u2p,ft=this._yaxis.series_u2p,nt,b,k,v,y,o,p,h,l,s,u;if(this._dataColors=[],this._barPoints=[],this.barWidth==null&&this.renderer.setBarWidth.call(this),s=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),nt=s[0],b=s[1],k=s[2],this._barNudge=this._stack?0:(-Math.abs(b/2-.5)+k)*(this.barWidth+this.barPadding),g){var a=new n.jqplot.ColorGenerator(this.negativeSeriesColors),c=new n.jqplot.ColorGenerator(this.seriesColors),d=a.get(this.index);if(this.useNegativeColors||(d=e.fillStyle),v=e.fillStyle,this.barDirection=="vertical")for(u=0;u<i.length;u++)this.data[u][1]!=null&&(points=[],o=i[u][0]+this._barNudge,y=this._stack&&this._prevGridData.length?this._prevGridData[u][1]:this.fillToZero?this._yaxis.series_u2p(0):this.waterfall&&u>0&&u<this.gridData.length-1?this.gridData[u-1][1]:t.canvas.height,e.fillStyle=this.fillToZero&&this._plotData[u][1]<0||this.waterfall&&this._data[u][1]<0?this.varyBarColor&&!this._stack?this.useNegativeColors?a.next():c.next():d:this.varyBarColor&&!this._stack?c.next():v,points.push([o-this.barWidth/2,y]),points.push([o-this.barWidth/2,i[u][1]]),points.push([o+this.barWidth/2,i[u][1]]),points.push([o+this.barWidth/2,y]),this._barPoints.push(points),w&&!this._stack&&(h=n.extend(!0,{},e),delete h.fillStyle,this.renderer.shadowRenderer.draw(t,points,h)),l=e.fillStyle||this.color,this._dataColors.push(l),this.renderer.shapeRenderer.draw(t,points,e));else if(this.barDirection=="horizontal")for(u=0;u<i.length;u++)this.data[u][0]!=null&&(points=[],o=i[u][1]-this._barNudge,p=this._stack&&this._prevGridData.length?this._prevGridData[u][0]:this.fillToZero?this._xaxis.series_u2p(0):this.waterfall&&u>0&&u<this.gridData.length-1?this.gridData[u-1][1]:0,this.fillToZero&&this._plotData[u][1]<0||this.waterfall&&this._data[u][1]<0?this.varyBarColor&&!this._stack&&(e.fillStyle=this.useNegativeColors?a.next():c.next()):e.fillStyle=this.varyBarColor&&!this._stack?c.next():v,points.push([p,o+this.barWidth/2]),points.push([p,o-this.barWidth/2]),points.push([i[u][0],o-this.barWidth/2]),points.push([i[u][0],o+this.barWidth/2]),this._barPoints.push(points),w&&!this._stack&&(h=n.extend(!0,{},e),delete h.fillStyle,this.renderer.shadowRenderer.draw(t,points,h)),l=e.fillStyle||this.color,this._dataColors.push(l),this.renderer.shapeRenderer.draw(t,points,e))}if(this.highlightColors.length==0)this.highlightColors=f(this._dataColors);else if(typeof this.highlightColors=="string")for(s=this.highlightColors,this.highlightColors=[],u=0;u<this._dataColors.length;u++)this.highlightColors.push(s)};n.jqplot.BarRenderer.prototype.drawShadow=function(n,t,i){var f=i!=undefined?i:{},v=f.shadow!=undefined?f.shadow:this.shadow,l=f.showLine!=undefined?f.showLine:this.showLine,y=f.fill!=undefined?f.fill:this.fill,p=this.xaxis,w=this.yaxis,b=this._xaxis.series_u2p,k=this._yaxis.series_u2p,a,h,c,e,o,r,u,s;if(this._stack&&this.shadow&&(this.barWidth==null&&this.renderer.setBarWidth.call(this),e=this._plotSeriesInfo=this.renderer.calcSeriesNumbers.call(this),a=e[0],h=e[1],c=e[2],this._barNudge=this._stack?0:(-Math.abs(h/2-.5)+c)*(this.barWidth+this.barPadding),l))if(this.barDirection=="vertical")for(r=0;r<t.length;r++)this.data[r][1]!=null&&(points=[],u=t[r][0]+this._barNudge,o=this._stack&&this._prevGridData.length?this._prevGridData[r][1]:this.fillToZero?this._yaxis.series_u2p(0):n.canvas.height,points.push([u-this.barWidth/2,o]),points.push([u-this.barWidth/2,t[r][1]]),points.push([u+this.barWidth/2,t[r][1]]),points.push([u+this.barWidth/2,o]),this.renderer.shadowRenderer.draw(n,points,f));else if(this.barDirection=="horizontal")for(r=0;r<t.length;r++)this.data[r][0]!=null&&(points=[],u=t[r][1]-this._barNudge,s=this._stack&&this._prevGridData.length?this._prevGridData[r][0]:0,points.push([s,u+this.barWidth/2]),points.push([t[r][0],u+this.barWidth/2]),points.push([t[r][0],u-this.barWidth/2]),points.push([s,u-this.barWidth/2]),this.renderer.shadowRenderer.draw(n,points,f))}})(jQuery);