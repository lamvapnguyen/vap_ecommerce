(function(n){n.jqplot.LogAxisRenderer=function(){n.jqplot.LinearAxisRenderer.call(this);this.axisDefaults={base:10,tickDistribution:"even"}};n.jqplot.LogAxisRenderer.prototype=new n.jqplot.LinearAxisRenderer;n.jqplot.LogAxisRenderer.prototype.constructor=n.jqplot.LogAxisRenderer;n.jqplot.LogAxisRenderer.prototype.init=function(t){var r,f,e,i,u;n.extend(!0,this.renderer,t);for(i in this.renderer.axisDefaults)this[i]==null&&(this[i]=this.renderer.axisDefaults[i]);for(r=this._dataBounds,f=0;f<this._series.length;f++)for(e=this._series[f],i=e.data,u=0;u<i.length;u++)this.name=="xaxis"||this.name=="x2axis"?((i[u][0]>r.max||r.max==null)&&(r.max=i[u][0]),(i[u][0]>r.max||r.max==null)&&(r.max=i[u][0])):((i[u][1]<r.min||r.min==null)&&(r.min=i[u][1]),(i[u][1]>r.max||r.max==null)&&(r.max=i[u][1]))};n.jqplot.LogAxisRenderer.prototype.createTicks=function(){var nt=this._ticks,h=this.ticks,w=this.name,b=this._dataBounds,f,g,i,r,e,u,v,y,c,l,k,o,s,t,a,d,n;if(h.length){for(t=0;t<h.length;t++)u=h[t],n=new this.tickRenderer(this.tickOptions),u.constructor==Array?(n.value=u[0],n.label=u[1],this.showTicks?this.showTickMarks||(n.showMark=!1):(n.showLabel=!1,n.showMark=!1),n.setTick(u[0],this.name),this._ticks.push(n)):(n.value=u,this.showTicks?this.showTickMarks||(n.showMark=!1):(n.showLabel=!1,n.showMark=!1),n.setTick(u,this.name),this._ticks.push(n));this.numberTicks=h.length;this.min=this._ticks[0].value;this.max=this._ticks[this.numberTicks-1].value}else{if(f=w=="xaxis"||w=="x2axis"?this._plotDimensions.width:this._plotDimensions.height,i=this.min!=null?this.min:b.min,r=this.max!=null?this.max:b.max,i==r&&(v=.05,i=i*(1-v),r=r*(1+v)),this.min!=null&&this.min<=0)throw"log axis minimum must be greater than 0";if(this.max!=null&&this.max<=0)throw"log axis maximum must be greater than 0";if(y=r-i,this.tickDistribution=="even")for(c=this.min!=null?this.min:i-i*((this.padMin-1)/2),l=this.max!=null?this.max:r+r*((this.padMax-1)/2),this.min=c,this.max=l,y=this.max-this.min,this.numberTicks==null&&(this.numberTicks=f>100?parseInt(3+(f-100)/75,10):2),k=Math.pow(this.base,1/(this.numberTicks-1)*Math.log(this.max/this.min)/Math.log(this.base)),t=0;t<this.numberTicks;t++)e=this.min*Math.pow(k,t),n=new this.tickRenderer(this.tickOptions),this.showTicks?this.showTickMarks||(n.showMark=!1):(n.showLabel=!1,n.showMark=!1),n.setTick(e,this.name),this._ticks.push(n);else if(this.tickDistribution=="power")for(c=Math.pow(this.base,Math.ceil(Math.log(i*(2-this.padMin))/Math.log(this.base))-1),l=Math.pow(this.base,Math.floor(Math.log(r*this.padMax)/Math.log(this.base))+1),this.min=c,this.max=l,y=this.max-this.min,o=0,s=0,this.numberTicks==null&&(f>100?(this.numberTicks=Math.round(Math.log(this.max/this.min)/Math.log(this.base)+1),this.numberTicks<2&&(this.numberTicks=2),o=parseInt(3+(f-100)/75,10)):(this.numberTicks=2,o=2),this.numberTicks<o-1&&(s=Math.floor(o/this.numberTicks))),t=0;t<this.numberTicks;t++)if(e=Math.pow(this.base,t-this.numberTicks+1)*this.max,n=new this.tickRenderer(this.tickOptions),this.showTicks?this.showTickMarks||(n.showMark=!1):(n.showLabel=!1,n.showMark=!1),n.setTick(e,this.name),this._ticks.push(n),s&&t<this.numberTicks-1){var p=Math.pow(this.base,t-this.numberTicks+2)*this.max,tt=p-e,g=p/(s+1);for(a=s-1;a>=0;a--)d=p-g*(a+1),n=new this.tickRenderer(this.tickOptions),this.showTicks?this.showTickMarks||(n.showMark=!1):(n.showLabel=!1,n.showMark=!1),n.setTick(d,this.name),this._ticks.push(n)}}};n.jqplot.LogAxisRenderer.prototype.pack=function(t,r){var y=parseInt(this.base,10),h=this._ticks,s=function(n){return Math.log(n)/Math.log(y)},a=function(n){return Math.pow(Math.E,Math.log(y)*n)},v,e,o,b,u,f,l,k;max=s(this.max);min=s(this.min);var p=r.max,c=r.min,w=this._label==null?!1:this._label.show;for(v in t)this._elem.css(v,t[v]);if(this._offsets=r,e=p-c,o=max-min,this.p2u=function(n){return a((n-c)*o/e+min)},this.u2p=function(n){return(s(n)-min)*e/o+c},this.name=="xaxis"||this.name=="x2axis"?(this.series_u2p=function(n){return(s(n)-min)*e/o},this.series_p2u=function(n){return a(n*o/e+min)}):(this.series_u2p=function(n){return(s(n)-max)*e/o},this.series_p2u=function(n){return a(n*o/e+max)}),this.show)if(this.name=="xaxis"||this.name=="x2axis"){for(i=0;i<h.length;i++)if(u=h[i],u.show&&u.showLabel){if(u.constructor==n.jqplot.CanvasAxisTickRenderer&&u.angle)switch(u.labelPosition){case"auto":f=u.angle<0?-u.getWidth()+u._textRenderer.height*Math.sin(-u._textRenderer.angle)/2:-u._textRenderer.height*Math.sin(u._textRenderer.angle)/2;break;case"end":f=-u.getWidth()+u._textRenderer.height*Math.sin(-u._textRenderer.angle)/2;break;case"start":f=-u._textRenderer.height*Math.sin(u._textRenderer.angle)/2;break;case"middle":f=-u.getWidth()/2+u._textRenderer.height*Math.sin(-u._textRenderer.angle)/2;break;default:f=-u.getWidth()/2+u._textRenderer.height*Math.sin(-u._textRenderer.angle)/2}else f=-u.getWidth()/2;l=this.u2p(u.value)+f+"px";u._elem.css("left",l);u.pack()}w&&(b=this._label._elem.outerWidth(!0),this._label._elem.css("left",c+e/2-b/2+"px"),this.name=="xaxis"?this._label._elem.css("bottom","0px"):this._label._elem.css("top","0px"),this._label.pack())}else{for(i=0;i<h.length;i++)if(u=h[i],u.show&&u.showLabel){if(u.constructor==n.jqplot.CanvasAxisTickRenderer&&u.angle)switch(u.labelPosition){case"auto":case"end":f=u.angle<0?-u._textRenderer.height*Math.cos(-u._textRenderer.angle)/2:-u.getHeight()+u._textRenderer.height*Math.cos(u._textRenderer.angle)/2;break;case"start":f=u.angle>0?-u._textRenderer.height*Math.cos(-u._textRenderer.angle)/2:-u.getHeight()+u._textRenderer.height*Math.cos(u._textRenderer.angle)/2;break;case"middle":f=-u.getHeight()/2;break;default:f=-u.getHeight()/2}else f=-u.getHeight()/2;l=this.u2p(u.value)+f+"px";u._elem.css("top",l);u.pack()}w&&(k=this._label._elem.outerHeight(!0),this._label._elem.css("top",p-e/2-k/2+"px"),this.name=="yaxis"?this._label._elem.css("left","0px"):this._label._elem.css("right","0px"),this._label.pack())}}})(jQuery);