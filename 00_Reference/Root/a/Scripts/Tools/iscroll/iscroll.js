(function(){function s(u,s){var c=this,l;if(c.element=typeof u=="object"?u:document.getElementById(u),c.wrapper=c.element.parentNode,c.element.style.webkitTransitionProperty="-webkit-transform",c.element.style.webkitTransitionTimingFunction="cubic-bezier(0,0,0.25,1)",c.element.style.webkitTransitionDuration="0",c.element.style.webkitTransform=i+"0,0"+r,c.options={bounce:t,momentum:t,checkDOMChanges:!0,topOnDOMChanges:!1,hScrollbar:t,vScrollbar:t,fadeScrollbar:h||!n,shrinkScrollbar:h||!n,desktopCompatibility:!1,overflow:"auto",snap:!1,bounceLock:!1,scrollbarColor:"rgba(0,0,0,0.5)",onScrollEnd:function(){}},typeof s=="object")for(l in s)c.options[l]=s[l];c.options.desktopCompatibility&&(c.options.overflow="hidden");c.onScrollEnd=c.options.onScrollEnd;delete c.options.onScrollEnd;c.wrapper.style.overflow=c.options.overflow;c.refresh();window.addEventListener("onorientationchange"in window?"orientationchange":"resize",c,!1);(n||c.options.desktopCompatibility)&&(c.element.addEventListener(f,c,!1),c.element.addEventListener(e,c,!1),c.element.addEventListener(o,c,!1));c.options.checkDOMChanges&&c.element.addEventListener("DOMSubtreeModified",c,!1)}function u(n,t,u,f,e){var o=this,s=document;o.dir=n;o.fade=u;o.shrink=f;o.uid=++c;o.bar=s.createElement("div");o.bar.style.cssText="position:absolute;top:0;left:0;-webkit-transition-timing-function:cubic-bezier(0,0,0.25,1);pointer-events:none;-webkit-transition-duration:0;-webkit-transition-delay:0;-webkit-transition-property:-webkit-transform;z-index:10;background:"+e+";-webkit-transform:"+i+"0,0"+r+";"+(n=="horizontal"?"-webkit-border-radius:3px 2px;min-width:6px;min-height:5px":"-webkit-border-radius:2px 3px;min-width:5px;min-height:6px");o.wrapper=s.createElement("div");o.wrapper.style.cssText="-webkit-mask:-webkit-canvas(scrollbar"+o.uid+o.dir+");position:absolute;z-index:10;pointer-events:none;overflow:hidden;opacity:0;-webkit-transition-duration:"+(u?"300ms":"0")+";-webkit-transition-delay:0;-webkit-transition-property:opacity;"+(o.dir=="horizontal"?"bottom:2px;left:2px;right:7px;height:5px":"top:2px;right:2px;bottom:7px;width:5px;");o.wrapper.appendChild(o.bar);t.appendChild(o.wrapper)}s.prototype={x:0,y:0,enabled:!0,handleEvent:function(n){var t=this;switch(n.type){case f:t.touchStart(n);break;case e:t.touchMove(n);break;case o:t.touchEnd(n);break;case"webkitTransitionEnd":t.transitionEnd();break;case"orientationchange":case"resize":t.refresh();break;case"DOMSubtreeModified":t.onDOMModified(n)}},onDOMModified:function(n){var t=this;n.target.parentNode==t.element&&(setTimeout(function(){t.refresh()},0),t.options.topOnDOMChanges&&(t.x!=0||t.y!=0)&&t.scrollTo(0,0,"0"))},refresh:function(){var n=this,t=n.x,i=n.y,r;n.scrollWidth=n.wrapper.clientWidth;n.scrollHeight=n.wrapper.clientHeight;n.scrollerWidth=n.element.offsetWidth;n.scrollerHeight=n.element.offsetHeight;n.maxScrollX=n.scrollWidth-n.scrollerWidth;n.maxScrollY=n.scrollHeight-n.scrollerHeight;n.directionX=0;n.directionY=0;n.scrollX&&(n.maxScrollX>=0?t=0:n.x<n.maxScrollX&&(t=n.maxScrollX));n.scrollY&&(n.maxScrollY>=0?i=0:n.y<n.maxScrollY&&(i=n.maxScrollY));n.options.snap&&(n.maxPageX=-Math.floor(n.maxScrollX/n.scrollWidth),n.maxPageY=-Math.floor(n.maxScrollY/n.scrollHeight),r=n.snap(t,i),t=r.x,i=r.y);(t!=n.x||i!=n.y)&&(n.setTransitionTime("0"),n.setPosition(t,i,!0));n.scrollX=n.scrollerWidth>n.scrollWidth;n.scrollY=!n.options.bounceLock&&!n.scrollX||n.scrollerHeight>n.scrollHeight;n.options.hScrollbar&&n.scrollX?(n.scrollBarX=n.scrollBarX||new u("horizontal",n.wrapper,n.options.fadeScrollbar,n.options.shrinkScrollbar,n.options.scrollbarColor),n.scrollBarX.init(n.scrollWidth,n.scrollerWidth)):n.scrollBarX&&(n.scrollBarX=n.scrollBarX.remove());n.options.vScrollbar&&n.scrollY&&n.scrollerHeight>n.scrollHeight?(n.scrollBarY=n.scrollBarY||new u("vertical",n.wrapper,n.options.fadeScrollbar,n.options.shrinkScrollbar,n.options.scrollbarColor),n.scrollBarY.init(n.scrollHeight,n.scrollerHeight)):n.scrollBarY&&(n.scrollBarY=n.scrollBarY.remove())},setPosition:function(n,t,u){var f=this;f.x=n;f.y=t;f.element.style.webkitTransform=i+f.x+"px,"+f.y+"px"+r;u||(f.scrollBarX&&f.scrollBarX.setPosition(f.x),f.scrollBarY&&f.scrollBarY.setPosition(f.y))},setTransitionTime:function(n){var i=this;n=n||"0";i.element.style.webkitTransitionDuration=n;i.scrollBarX&&(i.scrollBarX.bar.style.webkitTransitionDuration=n,i.scrollBarX.wrapper.style.webkitTransitionDuration=t&&i.options.fadeScrollbar?"300ms":"0");i.scrollBarY&&(i.scrollBarY.bar.style.webkitTransitionDuration=n,i.scrollBarY.wrapper.style.webkitTransitionDuration=t&&i.options.fadeScrollbar?"300ms":"0")},touchStart:function(t){var i=this,r;i.enabled&&(t.preventDefault(),t.stopPropagation(),i.scrolling=!0,i.moved=!1,i.distX=0,i.distY=0,i.setTransitionTime("0"),(i.options.momentum||i.options.snap)&&(r=new WebKitCSSMatrix(window.getComputedStyle(i.element).webkitTransform),(r.e!=i.x||r.f!=i.y)&&(document.removeEventListener("webkitTransitionEnd",i,!1),i.setPosition(r.e,r.f),i.moved=!0)),i.touchStartX=n?t.changedTouches[0].pageX:t.pageX,i.scrollStartX=i.x,i.touchStartY=n?t.changedTouches[0].pageY:t.pageY,i.scrollStartY=i.y,i.scrollStartTime=t.timeStamp,i.directionX=0,i.directionY=0)},touchMove:function(t){if(this.scrolling){var i=this,o=n?t.changedTouches[0].pageX:t.pageX,s=n?t.changedTouches[0].pageY:t.pageY,f=i.scrollX?o-i.touchStartX:0,e=i.scrollY?s-i.touchStartY:0,r=i.x+f,u=i.y+e;t.stopPropagation();i.touchStartX=o;i.touchStartY=s;(r>=0||r<i.maxScrollX)&&(r=i.options.bounce?Math.round(i.x+f/3):r>=0||i.maxScrollX>=0?0:i.maxScrollX);(u>=0||u<i.maxScrollY)&&(u=i.options.bounce?Math.round(i.y+e/3):u>=0||i.maxScrollY>=0?0:i.maxScrollY);i.distX+i.distY>5?(i.distX-3>i.distY?(u=i.y,e=0):i.distY-3>i.distX&&(r=i.x,f=0),i.setPosition(r,u),i.moved=!0,i.directionX=f>0?-1:1,i.directionY=e>0?-1:1):(i.distX+=Math.abs(f),i.distY+=Math.abs(e))}},touchEnd:function(t){if(this.scrolling){var i=this,c=t.timeStamp-i.scrollStartTime,r=n?t.changedTouches[0]:t,u,f,l,a,e=0,o=i.x,s=i.y,h;if(i.scrolling=!1,!i.moved){if(i.resetPosition(),n){for(u=r.target;u.nodeType!=1;)u=u.parentNode;f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,t.view,1,r.screenX,r.screenY,r.clientX,r.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,null);f._fake=!0;u.dispatchEvent(f)}return}if(!i.options.snap&&c>250){i.resetPosition();return}i.options.momentum&&(l=i.scrollX===!0?i.momentum(i.x-i.scrollStartX,c,i.options.bounce?-i.x+i.scrollWidth/5:-i.x,i.options.bounce?i.x+i.scrollerWidth-i.scrollWidth+i.scrollWidth/5:i.x+i.scrollerWidth-i.scrollWidth):{dist:0,time:0},a=i.scrollY===!0?i.momentum(i.y-i.scrollStartY,c,i.options.bounce?-i.y+i.scrollHeight/5:-i.y,i.options.bounce?(i.maxScrollY<0?i.y+i.scrollerHeight-i.scrollHeight:0)+i.scrollHeight/5:i.y+i.scrollerHeight-i.scrollHeight):{dist:0,time:0},e=Math.max(Math.max(l.time,a.time),1),o=i.x+l.dist,s=i.y+a.dist);i.options.snap&&(h=i.snap(o,s),o=h.x,s=h.y,e=Math.max(h.time,e));i.scrollTo(o,s,e+"ms")}},transitionEnd:function(){var n=this;document.removeEventListener("webkitTransitionEnd",n,!1);n.resetPosition()},resetPosition:function(){var n=this,t=n.x,i=n.y;n.x>=0?t=0:n.x<n.maxScrollX&&(t=n.maxScrollX);n.y>=0||n.maxScrollY>0?i=0:n.y<n.maxScrollY&&(i=n.maxScrollY);t!=n.x||i!=n.y?n.scrollTo(t,i):(n.moved&&(n.onScrollEnd(),n.moved=!1),n.scrollBarX&&n.scrollBarX.hide(),n.scrollBarY&&n.scrollBarY.hide())},snap:function(n,t){var i=this,r;return n=i.directionX>0?Math.floor(n/i.scrollWidth):i.directionX<0?Math.ceil(n/i.scrollWidth):Math.round(n/i.scrollWidth),i.pageX=-n,n=n*i.scrollWidth,n>0?n=i.pageX=0:n<i.maxScrollX&&(i.pageX=i.maxPageX,n=i.maxScrollX),t=i.directionY>0?Math.floor(t/i.scrollHeight):i.directionY<0?Math.ceil(t/i.scrollHeight):Math.round(t/i.scrollHeight),i.pageY=-t,t=t*i.scrollHeight,t>0?t=i.pageY=0:t<i.maxScrollY&&(i.pageY=i.maxPageY,t=i.maxScrollY),r=Math.round(Math.max(Math.abs(i.x-n)/i.scrollWidth*500,Math.abs(i.y-t)/i.scrollHeight*500)),{x:n,y:t,time:r}},scrollTo:function(n,t,i){var r=this;if(r.x==n&&r.y==t){r.resetPosition();return}r.moved=!0;r.setTransitionTime(i||"350ms");r.setPosition(n,t);i==="0"||i=="0s"||i=="0ms"?r.resetPosition():document.addEventListener("webkitTransitionEnd",r,!1)},scrollToPage:function(n,t,i){var r=this,u;r.options.snap||(r.pageX=-Math.round(r.x/r.scrollWidth),r.pageY=-Math.round(r.y/r.scrollHeight));n=="next"?n=++r.pageX:n=="prev"&&(n=--r.pageX);t=="next"?t=++r.pageY:t=="prev"&&(t=--r.pageY);n=-n*r.scrollWidth;t=-t*r.scrollHeight;u=r.snap(n,t);n=u.x;t=u.y;r.scrollTo(n,t,i||"500ms")},scrollToElement:function(n,t){if(n=typeof n=="object"?n:this.element.querySelector(n),n){var i=this,r=i.scrollX?-n.offsetLeft:0,u=i.scrollY?-n.offsetTop:0;r>=0?r=0:r<i.maxScrollX&&(r=i.maxScrollX);u>=0?u=0:u<i.maxScrollY&&(u=i.maxScrollY);i.scrollTo(r,u,t)}},momentum:function(n,t,i,r){var e=2.5,f=Math.abs(n)/t*1e3,u=f*f/e/1e3,o=0;return n>0&&u>i?(f=f*i/u/e,u=i):n<0&&u>r&&(f=f*r/u/e,u=r),u=u*(n<0?-1:1),o=f/1.2,{dist:Math.round(u),time:Math.round(o)}},destroy:function(n){var t=this;return window.removeEventListener("onorientationchange"in window?"orientationchange":"resize",t,!1),t.element.removeEventListener(f,t,!1),t.element.removeEventListener(e,t,!1),t.element.removeEventListener(o,t,!1),document.removeEventListener("webkitTransitionEnd",t,!1),t.options.checkDOMChanges&&t.element.removeEventListener("DOMSubtreeModified",t,!1),t.scrollBarX&&(t.scrollBarX=t.scrollBarX.remove()),t.scrollBarY&&(t.scrollBarY=t.scrollBarY.remove()),n&&t.wrapper.parentNode.removeChild(t.wrapper),null}};u.prototype={init:function(n,t){var i=this,f=document,u=Math.PI,r;i.dir=="horizontal"?i.maxSize!=i.wrapper.offsetWidth&&(i.maxSize=i.wrapper.offsetWidth,r=f.getCSSCanvasContext("2d","scrollbar"+i.uid+i.dir,i.maxSize,5),r.fillStyle="rgb(0,0,0)",r.beginPath(),r.arc(2.5,2.5,2.5,u/2,-u/2,!1),r.lineTo(i.maxSize-2.5,0),r.arc(i.maxSize-2.5,2.5,2.5,-u/2,u/2,!1),r.closePath(),r.fill()):i.maxSize!=i.wrapper.offsetHeight&&(i.maxSize=i.wrapper.offsetHeight,r=f.getCSSCanvasContext("2d","scrollbar"+i.uid+i.dir,5,i.maxSize),r.fillStyle="rgb(0,0,0)",r.beginPath(),r.arc(2.5,2.5,2.5,u,0,!1),r.lineTo(5,i.maxSize-2.5),r.arc(2.5,i.maxSize-2.5,2.5,0,u,!1),r.closePath(),r.fill());i.size=Math.max(Math.round(i.maxSize*i.maxSize/t),6);i.maxScroll=i.maxSize-i.size;i.toWrapperProp=i.maxScroll/(n-t);i.bar.style[i.dir=="horizontal"?"width":"height"]=i.size+"px"},setPosition:function(n){var t=this;t.wrapper.style.opacity!="1"&&t.show();n=Math.round(t.toWrapperProp*n);n<0?(n=t.shrink?n+n*3:0,t.size+n<7&&(n=-t.size+6)):n>t.maxScroll&&(n=t.shrink?n+(n-t.maxScroll)*3:t.maxScroll,t.size+t.maxScroll-n<7&&(n=t.size+t.maxScroll-6));n=t.dir=="horizontal"?i+n+"px,0"+r:i+"0,"+n+"px"+r;t.bar.style.webkitTransform=n},show:function(){t&&(this.wrapper.style.webkitTransitionDelay="0");this.wrapper.style.opacity="1"},hide:function(){t&&(this.wrapper.style.webkitTransitionDelay="350ms");this.wrapper.style.opacity="0"},remove:function(){return this.wrapper.parentNode.removeChild(this.wrapper),null}};var t="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,h=/iphone|ipad/gi.test(navigator.appVersion),n="ontouchstart"in window,f=n?"touchstart":"mousedown",e=n?"touchmove":"mousemove",o=n?"touchend":"mouseup",i="translate"+(t?"3d(":"("),r=t?",0)":")",c=0;window.iScroll=s})();